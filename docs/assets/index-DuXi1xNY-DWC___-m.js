import{aC as $}from"./index-BGLdF6jF.js";const z=Symbol(),_=Object.getPrototypeOf,R=new WeakMap,B=e=>e&&(R.has(e)?R.get(e):_(e)===Object.prototype||_(e)===Array.prototype),V=e=>B(e)&&e[z]||null,x=(e,s=!0)=>{R.set(e,s)},D={},j=e=>typeof e=="object"&&e!==null,O=new WeakMap,M=new WeakSet,q=(e=Object.is,s=(o,b)=>new Proxy(o,b),c=o=>j(o)&&!M.has(o)&&(Array.isArray(o)||!(Symbol.iterator in o))&&!(o instanceof WeakMap)&&!(o instanceof WeakSet)&&!(o instanceof Error)&&!(o instanceof Number)&&!(o instanceof Date)&&!(o instanceof String)&&!(o instanceof RegExp)&&!(o instanceof ArrayBuffer),a=o=>{switch(o.status){case"fulfilled":return o.value;case"rejected":throw o.reason;default:throw o}},u=new WeakMap,v=(o,b,m=a)=>{const p=u.get(o);if((p==null?void 0:p[0])===b)return p[1];const h=Array.isArray(o)?[]:Object.create(Object.getPrototypeOf(o));return x(h,!0),u.set(o,[b,h]),Reflect.ownKeys(o).forEach(A=>{if(Object.getOwnPropertyDescriptor(h,A))return;const y=Reflect.get(o,A),C={value:y,enumerable:!0,configurable:!0};if(M.has(y))x(y,!1);else if(y instanceof Promise)delete C.value,C.get=()=>m(y);else if(O.has(y)){const[d,k]=O.get(y);C.value=v(d,k(),m)}Object.defineProperty(h,A,C)}),Object.preventExtensions(h)},f=new WeakMap,w=[1,1],L=o=>{if(!j(o))throw new Error("object required");const b=f.get(o);if(b)return b;let m=w[0];const p=new Set,h=(n,t=++w[0])=>{m!==t&&(m=t,p.forEach(r=>r(n,t)))};let A=w[1];const y=(n=++w[1])=>(A!==n&&!p.size&&(A=n,d.forEach(([t])=>{const r=t[1](n);r>m&&(m=r)})),m),C=n=>(t,r)=>{const l=[...t];l[1]=[n,...l[1]],h(l,r)},d=new Map,k=(n,t)=>{if((D?"production":void 0)!=="production"&&d.has(n))throw new Error("prop listener already exists");if(p.size){const r=t[3](C(n));d.set(n,[t,r])}else d.set(n,[t])},T=n=>{var t;const r=d.get(n);r&&(d.delete(n),(t=r[1])==null||t.call(r))},H=n=>(p.add(n),p.size===1&&d.forEach(([t,r],l)=>{if((D?"production":void 0)!=="production"&&r)throw new Error("remove already exists");const S=t[3](C(l));d.set(l,[t,S])}),()=>{p.delete(n),p.size===0&&d.forEach(([t,r],l)=>{r&&(r(),d.set(l,[t]))})}),N=Array.isArray(o)?[]:Object.create(Object.getPrototypeOf(o)),P=s(N,{deleteProperty(n,t){const r=Reflect.get(n,t);T(t);const l=Reflect.deleteProperty(n,t);return l&&h(["delete",[t],r]),l},set(n,t,r,l){const S=Reflect.has(n,t),U=Reflect.get(n,t,l);if(S&&(e(U,r)||f.has(r)&&e(U,f.get(r))))return!0;T(t),j(r)&&(r=V(r)||r);let I=r;if(r instanceof Promise)r.then(E=>{r.status="fulfilled",r.value=E,h(["resolve",[t],E])}).catch(E=>{r.status="rejected",r.reason=E,h(["reject",[t],E])});else{!O.has(r)&&c(r)&&(I=L(r));const E=!M.has(I)&&O.get(I);E&&k(t,E)}return Reflect.set(n,t,I,l),h(["set",[t],r,U]),!0}});f.set(o,P);const K=[N,y,v,H];return O.set(P,K),Reflect.ownKeys(o).forEach(n=>{const t=Object.getOwnPropertyDescriptor(o,n);"value"in t&&(P[n]=o[n],delete t.value,delete t.writable),Object.defineProperty(N,n,t)}),P})=>[L,O,M,e,s,c,a,u,v,f,w],[J]=q();function W(e={}){return J(e)}function Z(e,s,c){const a=O.get(e);(D?"production":void 0)!=="production"&&!a&&console.warn("Please use proxy object");let u;const v=[],f=a[3];let w=!1;const L=f(o=>{v.push(o),u||(u=Promise.resolve().then(()=>{u=void 0,w&&s(v.splice(0))}))});return w=!0,()=>{w=!1,L()}}const i=W({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),F={state:i,subscribe(e){return Z(i,()=>e(i))},push(e,s){e!==i.view&&(i.view=e,s&&(i.data=s),i.history.push(e))},reset(e){i.view=e,i.history=[e]},replace(e){i.history.length>1&&(i.history[i.history.length-1]=e,i.view=e)},goBack(){if(i.history.length>1){i.history.pop();const[e]=i.history.slice(-1);i.view=e}},setData(e){i.data=e}},g={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return g.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const e=navigator.userAgent.toLowerCase();return g.isMobile()&&(e.includes("iphone")||e.includes("ipad"))},isHttpUrl(e){return e.startsWith("http://")||e.startsWith("https://")},isArray(e){return Array.isArray(e)&&e.length>0},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},formatNativeUrl(e,s,c){if(g.isHttpUrl(e))return this.formatUniversalUrl(e,s,c);let a=e;a.includes("://")||(a=e.replaceAll("/","").replaceAll(":",""),a=`${a}://`),a.endsWith("/")||(a=`${a}/`),this.setWalletConnectDeepLink(a,c);const u=encodeURIComponent(s);return`${a}wc?uri=${u}`},formatUniversalUrl(e,s,c){if(!g.isHttpUrl(e))return this.formatNativeUrl(e,s,c);let a=e;if(a.startsWith("https://t.me")){const v=$.Buffer.from(s).toString("base64").replace(/[=]/g,"");a.endsWith("/")&&(a=a.slice(0,-1)),this.setWalletConnectDeepLink(a,c);const f=new URL(a);return f.searchParams.set("startapp",v),f.toString()}a.endsWith("/")||(a=`${a}/`),this.setWalletConnectDeepLink(a,c);const u=encodeURIComponent(s);return`${a}wc?uri=${u}`},async wait(e){return new Promise(s=>{setTimeout(s,e)})},openHref(e,s){const c=this.isTelegram()?"_blank":s;window.open(e,c,"noreferrer noopener")},setWalletConnectDeepLink(e,s){try{localStorage.setItem(g.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:s}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(e){try{const[s]=e.split("?");localStorage.setItem(g.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:s,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(g.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(g.WCM_VERSION,"2.7.0")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var e;const s=(e=F.state.data)==null?void 0:e.Wallet;if(!s)throw new Error('Missing "Wallet" view data');return s}},Y=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https"));W({enabled:Y,userSessionId:"",events:[],connectedWalletId:void 0});W({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1});W({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0});g.isMobile();W({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]});W({open:!1});function G(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}W({themeMode:G()?"dark":"light"});W({open:!1,message:"",variant:"success"});export{F as R,g as c};

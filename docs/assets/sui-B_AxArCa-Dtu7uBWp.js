const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CrKGOs08-iJOFHPhe.js","assets/index-BGLdF6jF.js","assets/index-CUtl-BF5.css","assets/blake2b-CAi92fbu-C8y-5OqJ.js","assets/index-wFZO7Yy8-CgrhUj91.js","assets/index-Cg5Ko9uq-D_fEt2Ko.js","assets/unsignedTransaction-BD81leu1-Cw-cn2l3.js","assets/index-CRYNS9pm-BeJvQFa8.js"])))=>i.map(i=>d[i]);
import{ac as Q,ad as pn,ae as Ne,af as ne,ag as k,ah as Ct,ai as nt,aj as $t,ak as V,al as T,am as br,a0 as wr,an as Jt,ao as vr,ap as kr,a1 as Sr,a2 as jr,a3 as Or,aq as Ir,a5 as Er,a6 as pt,a7 as xr,ar as Qe,a8 as Cr,as as Je,at as Zt,au as $r,_ as ht,L as Mr,av as ee,aw as Tr,ax as hn,ay as gn}from"./index-BGLdF6jF.js";import{R as rt}from"./blake2b-CAi92fbu-C8y-5OqJ.js";import{U as Pr}from"./index-wFZO7Yy8-CgrhUj91.js";var Ur=Object.defineProperty,Ar=(n,e,t)=>e in n?Ur(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,fn=(n,e,t)=>Ar(n,typeof e!="symbol"?e+"":e,t);function it(n){let e=[],t=0;if(n===0)return[0];for(;n>0;)e[t]=n&127,(n>>=7)&&(e[t]|=128),t+=1;return e}function Br(n){let e=0,t=0,r=0;for(;;){let i=n[r];if(r+=1,e|=(i&127)<<t,!(i&128))break;t+=7}return{value:e,length:r}}class zr{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),t=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+t).toString(10)}read128(){let e=BigInt(this.read64()),t=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+t).toString(10)}read256(){let e=BigInt(this.read128()),t=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+t).toString(10)}readBytes(e){let t=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,t,e);return this.shift(e),r}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,t=new Uint8Array(this.dataView.buffer,e),{value:r,length:i}=Br(t);return this.shift(i),r}readVec(e){let t=this.readULEB(),r=[];for(let i=0;i<t;i++)r.push(e(this,i,t));return r}}class _r{constructor({initialSize:e=1024,maxSize:t=1/0,allocateSize:r=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=t,this.allocateSize=r,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const t=this.bytePosition+e;if(t>this.size){const r=Math.min(this.maxSize,this.size+this.allocateSize);if(t>r)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${t}`);this.size=r;const i=new ArrayBuffer(this.size);new Uint8Array(i).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(i)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return gt(BigInt(e),8).forEach(t=>this.write8(t)),this}write128(e){return gt(BigInt(e),16).forEach(t=>this.write8(t)),this}write256(e){return gt(BigInt(e),32).forEach(t=>this.write8(t)),this}writeULEB(e){return it(e).forEach(t=>this.write8(t)),this}writeVec(e,t){return this.writeULEB(e.length),Array.from(e).forEach((r,i)=>t(this,r,i,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return $r(this.toBytes(),e)}}function gt(n,e){let t=new Uint8Array(e),r=0;for(;n>0;)t[r]=Number(n%BigInt(256)),n=n/BigInt(256),r+=1;return t}var mn=n=>{throw TypeError(n)},yn=(n,e,t)=>e.has(n)||mn("Cannot "+t),K=(n,e,t)=>(yn(n,e,"read from private field"),t?t.call(n):e.get(n)),st=(n,e,t)=>e.has(n)?mn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),at=(n,e,t,r)=>(yn(n,e,"write to private field"),e.set(n,t),t),we,Te,Xe,oe;const Rr=class bn{constructor(e){st(this,we),st(this,Te),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),at(this,we,e.write),at(this,Te,e.serialize??((t,r)=>{const i=new _r({initialSize:this.serializedSize(t)??void 0,...r});return K(this,we).call(this,t,i),i.toBytes()})),this.validate=e.validate??(()=>{})}write(e,t){this.validate(e),K(this,we).call(this,e,t)}serialize(e,t){return this.validate(e),new Nr(this,K(this,Te).call(this,e,t))}parse(e){const t=new zr(e);return this.read(t)}fromHex(e){return this.parse(Ct(e))}fromBase58(e){return this.parse(nt(e))}fromBase64(e){return this.parse(V(e))}transform({name:e,input:t,output:r,validate:i}){return new bn({name:e??this.name,read:s=>r?r(this.read(s)):this.read(s),write:(s,o)=>K(this,we).call(this,t?t(s):s,o),serializedSize:s=>this.serializedSize(t?t(s):s),serialize:(s,o)=>K(this,Te).call(this,t?t(s):s,o),validate:s=>{i==null||i(s),this.validate(t?t(s):s)}})}};we=new WeakMap;Te=new WeakMap;let Z=Rr;const wn=Symbol.for("@mysten/serialized-bcs");function Mt(n){return!!n&&typeof n=="object"&&n[wn]===!0}class Nr{constructor(e,t){st(this,Xe),st(this,oe),at(this,Xe,e),at(this,oe,t)}get[wn](){return!0}toBytes(){return K(this,oe)}toHex(){return Ne(K(this,oe))}toBase64(){return T(K(this,oe))}toBase58(){return $t(K(this,oe))}parse(){return K(this,Xe).parse(K(this,oe))}}Xe=new WeakMap;oe=new WeakMap;function ot({size:n,...e}){return new Z({...e,serializedSize:()=>n})}function ft({readMethod:n,writeMethod:e,...t}){return ot({...t,read:r=>r[n](),write:(r,i)=>i[e](r),validate:r=>{var i;if(r<0||r>t.maxValue)throw new TypeError(`Invalid ${t.name} value: ${r}. Expected value in range 0-${t.maxValue}`);(i=t.validate)==null||i.call(t,r)}})}function mt({readMethod:n,writeMethod:e,...t}){return ot({...t,read:r=>r[n](),write:(r,i)=>i[e](BigInt(r)),validate:r=>{var i;const s=BigInt(r);if(s<0||s>t.maxValue)throw new TypeError(`Invalid ${t.name} value: ${s}. Expected value in range 0-${t.maxValue}`);(i=t.validate)==null||i.call(t,s)}})}function Vr({serialize:n,...e}){const t=new Z({...e,serialize:n,write:(r,i)=>{for(const s of t.serialize(r).toBytes())i.write8(s)}});return t}function Dr({toBytes:n,fromBytes:e,...t}){return new Z({...t,read:r=>{const i=r.readULEB(),s=r.readBytes(i);return e(s)},write:(r,i)=>{const s=n(r);i.writeULEB(s.length);for(let o=0;o<s.length;o++)i.write8(s[o])},serialize:r=>{const i=n(r),s=it(i.length),o=new Uint8Array(s.length+i.length);return o.set(s,0),o.set(i,s.length),o},validate:r=>{var i;if(typeof r!="string")throw new TypeError(`Invalid ${t.name} value: ${r}. Expected string`);(i=t.validate)==null||i.call(t,r)}})}function qr(n){let e=null;function t(){return e||(e=n()),e}return new Z({name:"lazy",read:r=>t().read(r),serializedSize:r=>t().serializedSize(r),write:(r,i)=>t().write(r,i),serialize:(r,i)=>t().serialize(r,i).toBytes()})}const a={u8(n){return ft({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...n})},u16(n){return ft({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...n})},u32(n){return ft({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...n})},u64(n){return mt({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...n})},u128(n){return mt({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...n})},u256(n){return mt({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...n})},bool(n){return ot({name:"bool",size:1,read:e=>e.read8()===1,write:(e,t)=>t.write8(e?1:0),...n,validate:e=>{var t;if((t=n==null?void 0:n.validate)==null||t.call(n,e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)}})},uleb128(n){return Vr({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from(it(e)),...n})},bytes(n,e){return ot({name:`bytes[${n}]`,size:n,read:t=>t.readBytes(n),write:(t,r)=>{const i=new Uint8Array(t);for(let s=0;s<n;s++)r.write8(i[s]??0)},...e,validate:t=>{var r;if((r=e==null?void 0:e.validate)==null||r.call(e,t),!t||typeof t!="object"||!("length"in t))throw new TypeError(`Expected array, found ${typeof t}`);if(t.length!==n)throw new TypeError(`Expected array of length ${n}, found ${t.length}`)}})},byteVector(n){return new Z({name:"bytesVector",read:e=>{const t=e.readULEB();return e.readBytes(t)},write:(e,t)=>{const r=new Uint8Array(e);t.writeULEB(r.length);for(let i=0;i<r.length;i++)t.write8(r[i]??0)},...n,serializedSize:e=>{const t="length"in e?e.length:null;return t==null?null:it(t).length+t},validate:e=>{var t;if((t=n==null?void 0:n.validate)==null||t.call(n,e),!e||typeof e!="object"||!("length"in e))throw new TypeError(`Expected array, found ${typeof e}`)}})},string(n){return Dr({name:"string",toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...n})},fixedArray(n,e,t){return new Z({name:`${e.name}[${n}]`,read:r=>{const i=new Array(n);for(let s=0;s<n;s++)i[s]=e.read(r);return i},write:(r,i)=>{for(const s of r)e.write(s,i)},...t,validate:r=>{var i;if((i=t==null?void 0:t.validate)==null||i.call(t,r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==n)throw new TypeError(`Expected array of length ${n}, found ${r.length}`)}})},option(n){return a.enum(`Option<${n.name}>`,{None:null,Some:n}).transform({input:e=>e==null?{None:!0}:{Some:e},output:e=>e.$kind==="Some"?e.Some:null})},vector(n,e){return new Z({name:`vector<${n.name}>`,read:t=>{const r=t.readULEB(),i=new Array(r);for(let s=0;s<r;s++)i[s]=n.read(t);return i},write:(t,r)=>{r.writeULEB(t.length);for(const i of t)n.write(i,r)},...e,validate:t=>{var r;if((r=e==null?void 0:e.validate)==null||r.call(e,t),!t||typeof t!="object"||!("length"in t))throw new TypeError(`Expected array, found ${typeof t}`)}})},tuple(n,e){return new Z({name:`(${n.map(t=>t.name).join(", ")})`,serializedSize:t=>{let r=0;for(let i=0;i<n.length;i++){const s=n[i].serializedSize(t[i]);if(s==null)return null;r+=s}return r},read:t=>{const r=[];for(const i of n)r.push(i.read(t));return r},write:(t,r)=>{for(let i=0;i<n.length;i++)n[i].write(t[i],r)},...e,validate:t=>{var r;if((r=e==null?void 0:e.validate)==null||r.call(e,t),!Array.isArray(t))throw new TypeError(`Expected array, found ${typeof t}`);if(t.length!==n.length)throw new TypeError(`Expected array of length ${n.length}, found ${t.length}`)}})},struct(n,e,t){const r=Object.entries(e);return new Z({name:n,serializedSize:i=>{let s=0;for(const[o,c]of r){const u=c.serializedSize(i[o]);if(u==null)return null;s+=u}return s},read:i=>{const s={};for(const[o,c]of r)s[o]=c.read(i);return s},write:(i,s)=>{for(const[o,c]of r)c.write(i[o],s)},...t,validate:i=>{var s;if((s=t==null?void 0:t.validate)==null||s.call(t,i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`)}})},enum(n,e,t){const r=Object.entries(e);return new Z({name:n,read:i=>{const s=i.readULEB(),o=r[s];if(!o)throw new TypeError(`Unknown value ${s} for enum ${n}`);const[c,u]=o;return{[c]:(u==null?void 0:u.read(i))??!0,$kind:c}},write:(i,s)=>{const[o,c]=Object.entries(i).filter(([u])=>Object.hasOwn(e,u))[0];for(let u=0;u<r.length;u++){const[g,d]=r[u];if(g===o){s.writeULEB(u),d==null||d.write(c,s);return}}},...t,validate:i=>{var s;if((s=t==null?void 0:t.validate)==null||s.call(t,i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`);const o=Object.keys(i).filter(u=>i[u]!==void 0&&Object.hasOwn(e,u));if(o.length!==1)throw new TypeError(`Expected object with one key, but found ${o.length} for type ${n}}`);const[c]=o;if(!Object.hasOwn(e,c))throw new TypeError(`Invalid enum variant ${c}`)}})},map(n,e){return a.vector(a.tuple([n,e])).transform({name:`Map<${n.name}, ${e.name}>`,input:t=>[...t.entries()],output:t=>{const r=new Map;for(const[i,s]of t)r.set(i,s);return r}})},lazy(n){return qr(n)}},Kr=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,Wr=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i;function Fr(n,e="at"){const t=n.toLowerCase();let r;if(t.includes("@")){if(!Kr.test(t))throw new Error(`Invalid SuiNS name ${n}`);const[i,s]=t.split("@");r=[...i?i.split("."):[],s]}else{if(!Wr.test(t))throw new Error(`Invalid SuiNS name ${n}`);r=t.split(".").slice(0,-1)}return e==="dot"?`${r.join(".")}.sui`:`${r.slice(0,-1).join(".")}@${r[r.length-1]}`}BigInt(1e9);const Lr="0x1",vn="0x2",ha=Q("0x6"),Gr=`${vn}::sui::SUI`;Q("0x5");const Jr=/^vector<(.+)>$/,Zr=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class H{static parseFromStr(e,t=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const r=e.match(Jr);if(r)return{vector:H.parseFromStr(r[1],t)};const i=e.match(Zr);if(i)return{struct:{address:t?k(i[1]):i[1],module:i[2],name:i[3],typeParams:i[5]===void 0?[]:H.parseStructTypeArgs(i[5],t)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,t=!1){return br(e).map(r=>H.parseFromStr(r,t))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${H.tagToString(e.vector)}>`;if("struct"in e){const t=e.struct,r=t.typeParams.map(H.tagToString).join(", ");return`${t.address}::${t.module}::${t.name}${r?`<${r}>`:""}`}throw new Error("Invalid TypeTag")}}function Hr(n){return a.u64({name:"unsafe_u64",...n}).transform({input:e=>e,output:e=>Number(e)})}function Qr(n){return a.enum("Option",{None:null,Some:n})}const I=a.bytes(pn).transform({validate:n=>{const e=typeof n=="string"?n:Ne(n);if(!e||!ne(k(e)))throw new Error(`Invalid Sui address ${e}`)},input:n=>typeof n=="string"?Ct(k(n)):n,output:n=>k(Ne(n))}),F=a.vector(a.u8()).transform({name:"ObjectDigest",input:n=>nt(n),output:n=>$t(new Uint8Array(n)),validate:n=>{if(nt(n).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),R=a.struct("SuiObjectRef",{objectId:I,version:a.u64(),digest:F}),kn=a.struct("SharedObjectRef",{objectId:I,initialSharedVersion:a.u64(),mutable:a.bool()}),Sn=a.enum("ObjectArg",{ImmOrOwnedObject:R,SharedObject:kn,Receiving:R}),jn=a.enum("CallArg",{Pure:a.struct("Pure",{bytes:a.vector(a.u8()).transform({input:n=>typeof n=="string"?V(n):n,output:n=>T(new Uint8Array(n))})}),Object:Sn}),Tt=a.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:a.lazy(()=>Tt),struct:a.lazy(()=>$n),u16:null,u32:null,u256:null}),Pt=Tt.transform({input:n=>typeof n=="string"?H.parseFromStr(n,!0):n,output:n=>H.tagToString(n)}),J=a.enum("Argument",{GasCoin:null,Input:a.u16(),Result:a.u16(),NestedResult:a.tuple([a.u16(),a.u16()])}),On=a.struct("ProgrammableMoveCall",{package:I,module:a.string(),function:a.string(),typeArguments:a.vector(Pt),arguments:a.vector(J)}),In=a.enum("Command",{MoveCall:On,TransferObjects:a.struct("TransferObjects",{objects:a.vector(J),address:J}),SplitCoins:a.struct("SplitCoins",{coin:J,amounts:a.vector(J)}),MergeCoins:a.struct("MergeCoins",{destination:J,sources:a.vector(J)}),Publish:a.struct("Publish",{modules:a.vector(a.vector(a.u8()).transform({input:n=>typeof n=="string"?V(n):n,output:n=>T(new Uint8Array(n))})),dependencies:a.vector(I)}),MakeMoveVec:a.struct("MakeMoveVec",{type:Qr(Pt).transform({input:n=>n===null?{None:!0}:{Some:n},output:n=>n.Some??null}),elements:a.vector(J)}),Upgrade:a.struct("Upgrade",{modules:a.vector(a.vector(a.u8()).transform({input:n=>typeof n=="string"?V(n):n,output:n=>T(new Uint8Array(n))})),dependencies:a.vector(I),package:I,ticket:J})}),En=a.struct("ProgrammableTransaction",{inputs:a.vector(jn),commands:a.vector(In)}),xn=a.enum("TransactionKind",{ProgrammableTransaction:En,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),Cn=a.enum("TransactionExpiration",{None:null,Epoch:Hr()}),$n=a.struct("StructTag",{address:I,module:a.string(),name:a.string(),typeParams:a.vector(Tt)}),Mn=a.struct("GasData",{payment:a.vector(R),owner:I,price:a.u64(),budget:a.u64()}),Tn=a.struct("TransactionDataV1",{kind:xn,sender:I,gasData:Mn,expiration:Cn}),Pn=a.enum("TransactionData",{V1:Tn}),Un=a.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),An=a.enum("IntentVersion",{V0:null}),Bn=a.enum("AppId",{Sui:null}),zn=a.struct("Intent",{scope:Un,version:An,appId:Bn});function _n(n){return a.struct(`IntentMessage<${n.name}>`,{intent:zn,value:n})}const Rn=a.enum("CompressedSignature",{ED25519:a.fixedArray(64,a.u8()),Secp256k1:a.fixedArray(64,a.u8()),Secp256r1:a.fixedArray(64,a.u8()),ZkLogin:a.vector(a.u8())}),Nn=a.enum("PublicKey",{ED25519:a.fixedArray(32,a.u8()),Secp256k1:a.fixedArray(33,a.u8()),Secp256r1:a.fixedArray(33,a.u8()),ZkLogin:a.vector(a.u8())}),Vn=a.struct("MultiSigPkMap",{pubKey:Nn,weight:a.u8()}),Dn=a.struct("MultiSigPublicKey",{pk_map:a.vector(Vn),threshold:a.u16()}),Xr=a.struct("MultiSig",{sigs:a.vector(Rn),bitmap:a.u16(),multisig_pk:Dn}),Yr=a.vector(a.u8()).transform({input:n=>typeof n=="string"?V(n):n,output:n=>T(new Uint8Array(n))}),qn=a.struct("SenderSignedTransaction",{intentMessage:_n(Pn),txSignatures:a.vector(Yr)}),ei=a.vector(qn,{name:"SenderSignedData"}),ti=a.struct("PasskeyAuthenticator",{authenticatorData:a.vector(a.u8()),clientDataJson:a.string(),userSignature:a.vector(a.u8())}),ni=a.enum("PackageUpgradeError",{UnableToFetchPackage:a.struct("UnableToFetchPackage",{packageId:I}),NotAPackage:a.struct("NotAPackage",{objectId:I}),IncompatibleUpgrade:null,DigestDoesNotMatch:a.struct("DigestDoesNotMatch",{digest:a.vector(a.u8())}),UnknownUpgradePolicy:a.struct("UnknownUpgradePolicy",{policy:a.u8()}),PackageIDDoesNotMatch:a.struct("PackageIDDoesNotMatch",{packageId:I,ticketId:I})}),ri=a.struct("ModuleId",{address:I,name:a.string()}),Ht=a.struct("MoveLocation",{module:ri,function:a.u16(),instruction:a.u16(),functionName:a.option(a.string())}),ii=a.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:a.struct("IndexOutOfBounds",{idx:a.u16()}),SecondaryIndexOutOfBounds:a.struct("SecondaryIndexOutOfBounds",{resultIdx:a.u16(),secondaryIdx:a.u16()}),InvalidResultArity:a.struct("InvalidResultArity",{resultIdx:a.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),si=a.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),ai=a.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:a.struct("MoveObjectTooBig",{objectSize:a.u64(),maxObjectSize:a.u64()}),MovePackageTooBig:a.struct("MovePackageTooBig",{objectSize:a.u64(),maxObjectSize:a.u64()}),CircularObjectOwnership:a.struct("CircularObjectOwnership",{object:I}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:a.option(Ht),MoveAbort:a.tuple([Ht,a.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:a.struct("CommandArgumentError",{argIdx:a.u16(),kind:ii}),TypeArgumentError:a.struct("TypeArgumentError",{argumentIdx:a.u16(),kind:si}),UnusedValueWithoutDrop:a.struct("UnusedValueWithoutDrop",{resultIdx:a.u16(),secondaryIdx:a.u16()}),InvalidPublicFunctionReturnType:a.struct("InvalidPublicFunctionReturnType",{idx:a.u16()}),InvalidTransferObject:null,EffectsTooLarge:a.struct("EffectsTooLarge",{currentSize:a.u64(),maxSize:a.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:a.struct("PackageUpgradeError",{upgradeError:ni}),WrittenObjectsTooLarge:a.struct("WrittenObjectsTooLarge",{currentSize:a.u64(),maxSize:a.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:a.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:a.vector(I)}),AddressDeniedForCoin:a.struct("AddressDeniedForCoin",{address:I,coinType:a.string()}),CoinTypeGlobalPause:a.struct("CoinTypeGlobalPause",{coinType:a.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),Kn=a.enum("ExecutionStatus",{Success:null,Failed:a.struct("ExecutionFailed",{error:ai,command:a.option(a.u64())})}),Wn=a.struct("GasCostSummary",{computationCost:a.u64(),storageCost:a.u64(),storageRebate:a.u64(),nonRefundableStorageFee:a.u64()}),ke=a.enum("Owner",{AddressOwner:I,ObjectOwner:I,Shared:a.struct("Shared",{initialSharedVersion:a.u64()}),Immutable:null}),oi=a.struct("TransactionEffectsV1",{status:Kn,executedEpoch:a.u64(),gasUsed:Wn,modifiedAtVersions:a.vector(a.tuple([I,a.u64()])),sharedObjects:a.vector(R),transactionDigest:F,created:a.vector(a.tuple([R,ke])),mutated:a.vector(a.tuple([R,ke])),unwrapped:a.vector(a.tuple([R,ke])),deleted:a.vector(R),unwrappedThenDeleted:a.vector(R),wrapped:a.vector(R),gasObject:a.tuple([R,ke]),eventsDigest:a.option(F),dependencies:a.vector(F)}),Ut=a.tuple([a.u64(),F]),ui=a.enum("ObjectIn",{NotExist:null,Exist:a.tuple([Ut,ke])}),ci=a.enum("ObjectOut",{NotExist:null,ObjectWrite:a.tuple([F,ke]),PackageWrite:Ut}),li=a.enum("IDOperation",{None:null,Created:null,Deleted:null}),di=a.struct("EffectsObjectChange",{inputState:ui,outputState:ci,idOperation:li}),pi=a.enum("UnchangedSharedKind",{ReadOnlyRoot:Ut,MutateDeleted:a.u64(),ReadDeleted:a.u64(),Cancelled:a.u64(),PerEpochConfig:null}),hi=a.struct("TransactionEffectsV2",{status:Kn,executedEpoch:a.u64(),gasUsed:Wn,transactionDigest:F,gasObjectIndex:a.option(a.u32()),eventsDigest:a.option(F),dependencies:a.vector(F),lamportVersion:a.u64(),changedObjects:a.vector(a.tuple([I,di])),unchangedSharedObjects:a.vector(a.tuple([I,pi])),auxDataDigest:a.option(F)}),gi=a.enum("TransactionEffects",{V1:oi,V2:hi});function Ae(n){switch(n){case"u8":return a.u8();case"u16":return a.u16();case"u32":return a.u32();case"u64":return a.u64();case"u128":return a.u128();case"u256":return a.u256();case"bool":return a.bool();case"string":return a.string();case"id":case"address":return I}const e=n.match(/^(vector|option)<(.+)>$/);if(e){const[t,r]=e.slice(1);return t==="vector"?a.vector(Ae(r)):a.option(Ae(r))}throw new Error(`Invalid Pure type name: ${n}`)}const y={...a,U8:a.u8(),U16:a.u16(),U32:a.u32(),U64:a.u64(),U128:a.u128(),U256:a.u256(),ULEB128:a.uleb128(),Bool:a.bool(),String:a.string(),Address:I,AppId:Bn,Argument:J,CallArg:jn,CompressedSignature:Rn,GasData:Mn,Intent:zn,IntentMessage:_n,IntentScope:Un,IntentVersion:An,MultiSig:Xr,MultiSigPkMap:Vn,MultiSigPublicKey:Dn,ObjectArg:Sn,ObjectDigest:F,ProgrammableMoveCall:On,ProgrammableTransaction:En,PublicKey:Nn,SenderSignedData:ei,SenderSignedTransaction:qn,SharedObjectRef:kn,StructTag:$n,SuiObjectRef:R,Command:In,TransactionData:Pn,TransactionDataV1:Tn,TransactionExpiration:Cn,TransactionKind:xn,TypeTag:Pt,TransactionEffects:gi,PasskeyAuthenticator:ti},fi="1.21.2",mi="1.43.0",yi={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};class Fn extends Error{}class Ln extends Fn{constructor(e,t){super(e),this.code=t,this.type=yi[t]??"ServerError"}}class bi extends Fn{constructor(e,t,r){super(e),this.status=t,this.statusText=r}}var Gn=n=>{throw TypeError(n)},At=(n,e,t)=>e.has(n)||Gn("Cannot "+t),C=(n,e,t)=>(At(n,e,"read from private field"),t?t.call(n):e.get(n)),ce=(n,e,t)=>e.has(n)?Gn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),je=(n,e,t,r)=>(At(n,e,"write to private field"),e.set(n,t),t),Jn=(n,e,t)=>(At(n,e,"access private method"),t),wi=(n,e,t,r)=>({set _(i){je(n,e,i)},get _(){return C(n,e,r)}}),pe,Be,re,fe,Ve,Oe,ut,Zn,Hn;function vi(n){const e=new URL(n);return e.protocol=e.protocol.replace("http","ws"),e.toString()}const ki={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class Si{constructor(e,t={}){if(ce(this,ut),ce(this,pe,0),ce(this,Be,0),ce(this,re,null),ce(this,fe,null),ce(this,Ve,new Set),ce(this,Oe,new Map),this.endpoint=e,this.options={...ki,...t},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=vi(this.endpoint))}async makeRequest(e,t){const r=await Jn(this,ut,Zn).call(this);return new Promise((i,s)=>{je(this,pe,C(this,pe)+1),C(this,Oe).set(C(this,pe),{resolve:i,reject:s,timeout:setTimeout(()=>{C(this,Oe).delete(C(this,pe)),s(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),r.send(JSON.stringify({jsonrpc:"2.0",id:C(this,pe),method:e,params:t}))}).then(({error:i,result:s})=>{if(i)throw new Ln(i.message,i.code);return s})}async subscribe(e){const t=new ji(e);return C(this,Ve).add(t),await t.subscribe(this),()=>t.unsubscribe(this)}}pe=new WeakMap;Be=new WeakMap;re=new WeakMap;fe=new WeakMap;Ve=new WeakMap;Oe=new WeakMap;ut=new WeakSet;Zn=function(){return C(this,fe)?C(this,fe):(je(this,fe,new Promise(n=>{var e;(e=C(this,re))==null||e.close(),je(this,re,new this.options.WebSocketConstructor(this.endpoint)),C(this,re).addEventListener("open",()=>{je(this,Be,0),n(C(this,re))}),C(this,re).addEventListener("close",()=>{wi(this,Be)._++,C(this,Be)<=this.options.maxReconnects&&setTimeout(()=>{Jn(this,ut,Hn).call(this)},this.options.reconnectTimeout)}),C(this,re).addEventListener("message",({data:t})=>{let r;try{r=JSON.parse(t)}catch(i){console.error(new Error(`Failed to parse RPC message: ${t}`,{cause:i}));return}if("id"in r&&r.id!=null&&C(this,Oe).has(r.id)){const{resolve:i,timeout:s}=C(this,Oe).get(r.id);clearTimeout(s),i(r)}else if("params"in r){const{params:i}=r;C(this,Ve).forEach(s=>{s.subscriptionId===i.subscription&&i.subscription===s.subscriptionId&&s.onMessage(i.result)})}})})),C(this,fe))};Hn=async function(){var n;return(n=C(this,re))==null||n.close(),je(this,fe,null),Promise.allSettled([...C(this,Ve)].map(e=>e.subscribe(this)))};class ji{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){const{subscriptionId:t}=this;return this.subscribed=!1,t==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[t]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;const t=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=t)}}var Qn=n=>{throw TypeError(n)},Bt=(n,e,t)=>e.has(n)||Qn("Cannot "+t),N=(n,e,t)=>(Bt(n,e,"read from private field"),t?t.call(n):e.get(n)),Ze=(n,e,t)=>e.has(n)?Qn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),bt=(n,e,t,r)=>(Bt(n,e,"write to private field"),e.set(n,t),t),Oi=(n,e,t)=>(Bt(n,e,"access private method"),t),Pe,W,ze,wt,Xn;class Ii{constructor(e){Ze(this,wt),Ze(this,Pe,0),Ze(this,W),Ze(this,ze),bt(this,W,e)}fetch(e,t){const r=N(this,W).fetch??fetch;if(!r)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return r(e,t)}async request(e){var t,r;bt(this,Pe,N(this,Pe)+1);const i=await this.fetch(((t=N(this,W).rpc)==null?void 0:t.url)??N(this,W).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":fi,"Client-Target-Api-Version":mi,"Client-Request-Method":e.method,...(r=N(this,W).rpc)==null?void 0:r.headers},body:JSON.stringify({jsonrpc:"2.0",id:N(this,Pe),method:e.method,params:e.params})});if(!i.ok)throw new bi(`Unexpected status code: ${i.status}`,i.status,i.statusText);const s=await i.json();if("error"in s&&s.error!=null)throw new Ln(s.error.message,s.error.code);return s.result}async subscribe(e){const t=await Oi(this,wt,Xn).call(this).subscribe(e);return async()=>!!await t()}}Pe=new WeakMap;W=new WeakMap;ze=new WeakMap;wt=new WeakSet;Xn=function(){var n;if(!N(this,ze)){const e=N(this,W).WebSocketConstructor??WebSocket;if(!e)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");bt(this,ze,new Si(((n=N(this,W).websocket)==null?void 0:n.url)??N(this,W).url,{WebSocketConstructor:e,...N(this,W).websocket}))}return N(this,ze)};const Ei="object",xi="ID",Ci="ascii",$i="String",Mi="string",Ti="String",Pi="option",Ui="Option";function Ai(n){const e=typeof n.body=="object"&&"datatype"in n.body?n.body.datatype:null;return!!e&&k(e.package)===k("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}function vt(n){if(typeof n=="string")switch(n){case"address":return y.Address;case"bool":return y.Bool;case"u8":return y.U8;case"u16":return y.U16;case"u32":return y.U32;case"u64":return y.U64;case"u128":return y.U128;case"u256":return y.U256;default:throw new Error(`Unknown type signature ${n}`)}if("vector"in n){if(n.vector==="u8")return y.vector(y.U8).transform({input:t=>typeof t=="string"?new TextEncoder().encode(t):t,output:t=>t});const e=vt(n.vector);return e?y.vector(e):null}if("datatype"in n){const e=k(n.datatype.package);if(e===k(Lr)){if(n.datatype.module===Ci&&n.datatype.type===$i||n.datatype.module===Mi&&n.datatype.type===Ti)return y.String;if(n.datatype.module===Pi&&n.datatype.type===Ui){const t=vt(n.datatype.typeParameters[0]);return t?y.vector(t):null}}if(e===k(vn)&&n.datatype.module===Ei&&n.datatype.type===xi)return y.Address}return null}function Bi(n){return typeof n=="object"&&"Reference"in n?{ref:"&",body:_e(n.Reference)}:typeof n=="object"&&"MutableReference"in n?{ref:"&mut",body:_e(n.MutableReference)}:{ref:null,body:_e(n)}}function _e(n){if(typeof n=="string")switch(n){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${n}`)}if("Vector"in n)return{vector:_e(n.Vector)};if("Struct"in n)return{datatype:{package:n.Struct.address,module:n.Struct.module,type:n.Struct.name,typeParameters:n.Struct.typeArguments.map(_e)}};if("TypeParameter"in n)return{typeParameter:n.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(n)}`)}function zi(n){return{$kind:"Pure",Pure:{bytes:n instanceof Uint8Array?T(n):n.toBase64()}}}const ie={Pure:zi,ObjectRef({objectId:n,digest:e,version:t}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:t,objectId:k(n)}}}},SharedObjectRef({objectId:n,mutable:e,initialSharedVersion:t}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:t,objectId:k(n)}}}},ReceivingRef({objectId:n,digest:e,version:t}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:t,objectId:k(n)}}}}};function _i(n){return{lang:(n==null?void 0:n.lang)??void 0,message:n==null?void 0:n.message,abortEarly:(n==null?void 0:n.abortEarly)??void 0,abortPipeEarly:(n==null?void 0:n.abortPipeEarly)??void 0}}function Ri(n,e){var t;return(t=void 0)==null?void 0:t.get(e)}function Yn(n){var e,t;const r=typeof n;return r==="string"?`"${n}"`:r==="number"||r==="bigint"||r==="boolean"?`${n}`:r==="object"||r==="function"?(n&&((t=(e=Object.getPrototypeOf(n))==null?void 0:e.constructor)==null?void 0:t.name))??"null":r}function _(n,e,t,r,i){const s=i&&"input"in i?i.input:t.value,o=(i==null?void 0:i.expected)??n.expects??null,c=(i==null?void 0:i.received)??Yn(s),u={kind:n.kind,type:n.type,input:s,expected:o,received:c,message:`Invalid ${e}: ${o?`Expected ${o} but r`:"R"}eceived ${c}`,requirement:n.requirement,path:i==null?void 0:i.path,issues:i==null?void 0:i.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},g=n.kind==="schema",d=(i==null?void 0:i.message)??n.message??Ri(n.reference,u.lang)??(g?(u.lang,void 0):null)??r.message??(u.lang,void 0);d&&(u.message=typeof d=="function"?d(u):d),g&&(t.typed=!1),t.issues?t.issues.push(u):t.issues=[u]}function Ni(n,e){return Object.hasOwn(n,e)&&e!=="__proto__"&&e!=="prototype"&&e!=="constructor"}var Vi=class extends Error{constructor(n){super(n[0].message),fn(this,"issues"),this.name="ValiError",this.issues=n}};function Fe(n,e){return{kind:"validation",type:"check",reference:Fe,async:!1,expects:null,requirement:n,message:e,_run(t,r){return t.typed&&!this.requirement(t.value)&&_(this,"input",t,r),t}}}function M(n){return{kind:"validation",type:"integer",reference:M,async:!1,expects:null,requirement:Number.isInteger,message:n,_run(e,t){return e.typed&&!this.requirement(e.value)&&_(this,"integer",e,t),e}}}function lt(n){return{kind:"transformation",type:"transform",reference:lt,async:!1,operation:n,_run(e){return e.value=this.operation(e.value),e}}}function zt(n,e,t){return typeof n.default=="function"?n.default(e,t):n.default}function kt(n,e){return!n._run({typed:!1,value:e},{abortEarly:!0}).issues}function h(n,e){return{kind:"schema",type:"array",reference:h,expects:"Array",async:!1,item:n,message:e,_run(t,r){var i;const s=t.value;if(Array.isArray(s)){t.typed=!0,t.value=[];for(let o=0;o<s.length;o++){const c=s[o],u=this.item._run({typed:!1,value:c},r);if(u.issues){const g={type:"array",origin:"value",input:s,key:o,value:c};for(const d of u.issues)d.path?d.path.unshift(g):d.path=[g],(i=t.issues)==null||i.push(d);if(t.issues||(t.issues=u.issues),r.abortEarly){t.typed=!1;break}}u.typed||(t.typed=!1),t.value.push(u.value)}}else _(this,"type",t,r);return t}}}function _t(n){return{kind:"schema",type:"bigint",reference:_t,expects:"bigint",async:!1,message:n,_run(e,t){return typeof e.value=="bigint"?e.typed=!0:_(this,"type",e,t),e}}}function dt(n){return{kind:"schema",type:"boolean",reference:dt,expects:"boolean",async:!1,message:n,_run(e,t){return typeof e.value=="boolean"?e.typed=!0:_(this,"type",e,t),e}}}function De(n){return{kind:"schema",type:"lazy",reference:De,expects:"unknown",async:!1,getter:n,_run(e,t){return this.getter(e.value)._run(e,t)}}}function f(n,e){return{kind:"schema",type:"literal",reference:f,expects:Yn(n),async:!1,literal:n,message:e,_run(t,r){return t.value===this.literal?t.typed=!0:_(this,"type",t,r),t}}}function v(n,...e){const t={kind:"schema",type:"nullable",reference:v,expects:`${n.expects} | null`,async:!1,wrapped:n,_run(r,i){return r.value===null&&("default"in this&&(r.value=zt(this,r,i)),r.value===null)?(r.typed=!0,r):this.wrapped._run(r,i)}};return 0 in e&&(t.default=e[0]),t}function Ee(n,...e){const t={kind:"schema",type:"nullish",reference:Ee,expects:`${n.expects} | null | undefined`,async:!1,wrapped:n,_run(r,i){return(r.value===null||r.value===void 0)&&("default"in this&&(r.value=zt(this,r,i)),r.value===null||r.value===void 0)?(r.typed=!0,r):this.wrapped._run(r,i)}};return 0 in e&&(t.default=e[0]),t}function x(n){return{kind:"schema",type:"number",reference:x,expects:"number",async:!1,message:n,_run(e,t){return typeof e.value=="number"&&!isNaN(e.value)?e.typed=!0:_(this,"type",e,t),e}}}function l(n,e){return{kind:"schema",type:"object",reference:l,expects:"Object",async:!1,entries:n,message:e,_run(t,r){var i;const s=t.value;if(s&&typeof s=="object"){t.typed=!0,t.value={};for(const o in this.entries){const c=s[o],u=this.entries[o]._run({typed:!1,value:c},r);if(u.issues){const g={type:"object",origin:"value",input:s,key:o,value:c};for(const d of u.issues)d.path?d.path.unshift(g):d.path=[g],(i=t.issues)==null||i.push(d);if(t.issues||(t.issues=u.issues),r.abortEarly){t.typed=!1;break}}u.typed||(t.typed=!1),(u.value!==void 0||o in s)&&(t.value[o]=u.value)}}else _(this,"type",t,r);return t}}}function A(n,...e){const t={kind:"schema",type:"optional",reference:A,expects:`${n.expects} | undefined`,async:!1,wrapped:n,_run(r,i){return r.value===void 0&&("default"in this&&(r.value=zt(this,r,i)),r.value===void 0)?(r.typed=!0,r):this.wrapped._run(r,i)}};return 0 in e&&(t.default=e[0]),t}function qe(n,e,t){return{kind:"schema",type:"record",reference:qe,expects:"Object",async:!1,key:n,value:e,message:t,_run(r,i){var s,o;const c=r.value;if(c&&typeof c=="object"){r.typed=!0,r.value={};for(const u in c)if(Ni(c,u)){const g=c[u],d=this.key._run({typed:!1,value:u},i);if(d.issues){const j={type:"object",origin:"key",input:c,key:u,value:g};for(const E of d.issues)E.path=[j],(s=r.issues)==null||s.push(E);if(r.issues||(r.issues=d.issues),i.abortEarly){r.typed=!1;break}}const p=this.value._run({typed:!1,value:g},i);if(p.issues){const j={type:"object",origin:"value",input:c,key:u,value:g};for(const E of p.issues)E.path?E.path.unshift(j):E.path=[j],(o=r.issues)==null||o.push(E);if(r.issues||(r.issues=p.issues),i.abortEarly){r.typed=!1;break}}(!d.typed||!p.typed)&&(r.typed=!1),d.typed&&(r.value[d.value]=p.value)}}else _(this,"type",r,i);return r}}}function m(n){return{kind:"schema",type:"string",reference:m,expects:"string",async:!1,message:n,_run(e,t){return typeof e.value=="string"?e.typed=!0:_(this,"type",e,t),e}}}function Rt(n,e){return{kind:"schema",type:"tuple",reference:Rt,expects:"Array",async:!1,items:n,message:e,_run(t,r){var i;const s=t.value;if(Array.isArray(s)){t.typed=!0,t.value=[];for(let o=0;o<this.items.length;o++){const c=s[o],u=this.items[o]._run({typed:!1,value:c},r);if(u.issues){const g={type:"array",origin:"value",input:s,key:o,value:c};for(const d of u.issues)d.path?d.path.unshift(g):d.path=[g],(i=t.issues)==null||i.push(d);if(t.issues||(t.issues=u.issues),r.abortEarly){t.typed=!1;break}}u.typed||(t.typed=!1),t.value.push(u.value)}}else _(this,"type",t,r);return t}}}function Qt(n){let e;if(n)for(const t of n)e?e.push(...t.issues):e=t.issues;return e}function U(n,e){return{kind:"schema",type:"union",reference:U,expects:[...new Set(n.map(t=>t.expects))].join(" | ")||"never",async:!1,options:n,message:e,_run(t,r){let i,s,o;for(const c of this.options){const u=c._run({typed:!1,value:t.value},r);if(u.typed)if(u.issues)s?s.push(u):s=[u];else{i=u;break}else o?o.push(u):o=[u]}if(i)return i;if(s){if(s.length===1)return s[0];_(this,"type",t,r,{issues:Qt(s)}),t.typed=!0}else{if((o==null?void 0:o.length)===1)return o[0];_(this,"type",t,r,{issues:Qt(o)})}return t}}}function me(){return{kind:"schema",type:"unknown",reference:me,expects:"unknown",async:!1,_run(n){return n.typed=!0,n}}}function $(n,e,t){const r=n._run({typed:!1,value:e},_i(t));if(r.issues)throw new Vi(r.issues);return r.value}function S(...n){return{...n[0],pipe:n,_run(e,t){for(let r=0;r<n.length;r++){if(e.issues&&(n[r].kind==="schema"||n[r].kind==="transformation")){e.typed=!1;break}(!e.issues||!t.abortEarly&&!t.abortPipeEarly)&&(e=n[r]._run(e,t))}return e}}}function be(n){const e=Object.entries(n).map(([t,r])=>l({[t]:r}));return S(U(e),lt(t=>({...t,$kind:Object.keys(t)[0]})))}const xe=S(m(),lt(n=>k(n)),Fe(ne)),z=xe,ye=m(),B=S(U([m(),S(x(),M())]),Fe(n=>{try{return BigInt(n),BigInt(n)>=0&&BigInt(n)<=18446744073709551615n}catch{return!1}},"Invalid u64")),ue=l({objectId:xe,version:B,digest:m()}),O=S(U([l({GasCoin:f(!0)}),l({Input:S(x(),M()),type:A(f("pure"))}),l({Input:S(x(),M()),type:A(f("object"))}),l({Result:S(x(),M())}),l({NestedResult:Rt([S(x(),M()),S(x(),M())])})]),lt(n=>({...n,$kind:Object.keys(n)[0]}))),Di=l({budget:v(B),price:v(B),owner:v(xe),payment:v(h(ue))}),St=U([f("address"),f("bool"),f("u8"),f("u16"),f("u32"),f("u64"),f("u128"),f("u256"),l({vector:De(()=>St)}),l({datatype:l({package:m(),module:m(),type:m(),typeParameters:h(De(()=>St))})}),l({typeParameter:S(x(),M())})]),qi=l({ref:v(U([f("&"),f("&mut")])),body:St}),Ki=l({package:z,module:m(),function:m(),typeArguments:h(m()),arguments:h(O),_argumentTypes:A(v(h(qi)))}),Wi=l({name:m(),inputs:qe(m(),U([O,h(O)])),data:qe(m(),me())}),Fi=be({MoveCall:Ki,TransferObjects:l({objects:h(O),address:O}),SplitCoins:l({coin:O,amounts:h(O)}),MergeCoins:l({destination:O,sources:h(O)}),Publish:l({modules:h(ye),dependencies:h(z)}),MakeMoveVec:l({type:v(m()),elements:h(O)}),Upgrade:l({modules:h(ye),dependencies:h(z),package:z,ticket:O}),$Intent:Wi}),er=be({ImmOrOwnedObject:ue,SharedObject:l({objectId:z,initialSharedVersion:B,mutable:dt()}),Receiving:ue}),Li=be({Object:er,Pure:l({bytes:ye}),UnresolvedPure:l({value:me()}),UnresolvedObject:l({objectId:z,version:A(v(B)),digest:A(v(m())),initialSharedVersion:A(v(B))})}),Xt=be({Object:er,Pure:l({bytes:ye})}),tr=be({None:f(!0),Epoch:B}),Ye=l({version:f(2),sender:Ee(xe),expiration:Ee(tr),gasData:Di,inputs:h(Li),commands:h(Fi)}),le={MoveCall(n){const[e,t="",r=""]="target"in n?n.target.split("::"):[n.package,n.module,n.function];return{$kind:"MoveCall",MoveCall:{package:e,module:t,function:r,typeArguments:n.typeArguments??[],arguments:n.arguments??[]}}},TransferObjects(n,e){return{$kind:"TransferObjects",TransferObjects:{objects:n.map(t=>$(O,t)),address:$(O,e)}}},SplitCoins(n,e){return{$kind:"SplitCoins",SplitCoins:{coin:$(O,n),amounts:e.map(t=>$(O,t))}}},MergeCoins(n,e){return{$kind:"MergeCoins",MergeCoins:{destination:$(O,n),sources:e.map(t=>$(O,t))}}},Publish({modules:n,dependencies:e}){return{$kind:"Publish",Publish:{modules:n.map(t=>typeof t=="string"?t:T(new Uint8Array(t))),dependencies:e.map(t=>Q(t))}}},Upgrade({modules:n,dependencies:e,package:t,ticket:r}){return{$kind:"Upgrade",Upgrade:{modules:n.map(i=>typeof i=="string"?i:T(new Uint8Array(i))),dependencies:e.map(i=>Q(i)),package:t,ticket:$(O,r)}}},MakeMoveVec({type:n,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:n??null,elements:e.map(t=>$(O,t))}}},Intent({name:n,inputs:e={},data:t={}}){return{$kind:"$Intent",$Intent:{name:n,inputs:Object.fromEntries(Object.entries(e).map(([r,i])=>[r,Array.isArray(i)?i.map(s=>$(O,s)):$(O,i)])),data:t}}}},jt=l({digest:m(),objectId:m(),version:U([S(x(),M()),m(),_t()])}),Gi=be({ImmOrOwned:jt,Shared:l({objectId:z,initialSharedVersion:B,mutable:dt()}),Receiving:jt}),Yt=be({Object:Gi,Pure:h(S(x(),M()))}),nr=U([l({kind:f("Input"),index:S(x(),M()),value:me(),type:A(f("object"))}),l({kind:f("Input"),index:S(x(),M()),value:me(),type:f("pure")})]),Ji=U([l({Epoch:S(x(),M())}),l({None:v(f(!0))})]),en=S(U([x(),m(),_t()]),Fe(n=>{if(!["string","number","bigint"].includes(typeof n))return!1;try{return BigInt(n),!0}catch{return!1}})),Nt=U([l({bool:v(f(!0))}),l({u8:v(f(!0))}),l({u64:v(f(!0))}),l({u128:v(f(!0))}),l({address:v(f(!0))}),l({signer:v(f(!0))}),l({vector:De(()=>Nt)}),l({struct:De(()=>Zi)}),l({u16:v(f(!0))}),l({u32:v(f(!0))}),l({u256:v(f(!0))})]),Zi=l({address:m(),module:m(),name:m(),typeParams:h(Nt)}),Hi=l({budget:A(en),price:A(en),payment:A(h(jt)),owner:A(m())}),Qi=[nr,l({kind:f("GasCoin")}),l({kind:f("Result"),index:S(x(),M())}),l({kind:f("NestedResult"),index:S(x(),M()),resultIndex:S(x(),M())})],se=U([...Qi]),Xi=l({kind:f("MoveCall"),target:S(m(),Fe(n=>n.split("::").length===3)),typeArguments:h(m()),arguments:h(se)}),Yi=l({kind:f("TransferObjects"),objects:h(se),address:se}),es=l({kind:f("SplitCoins"),coin:se,amounts:h(se)}),ts=l({kind:f("MergeCoins"),destination:se,sources:h(se)}),ns=l({kind:f("MakeMoveVec"),type:U([l({Some:Nt}),l({None:v(f(!0))})]),objects:h(se)}),rs=l({kind:f("Publish"),modules:h(h(S(x(),M()))),dependencies:h(m())}),is=l({kind:f("Upgrade"),modules:h(h(S(x(),M()))),dependencies:h(m()),packageId:m(),ticket:se}),ss=[Xi,Yi,es,ts,rs,is,ns],as=U([...ss]);l({version:f(1),sender:A(m()),expiration:Ee(Ji),gasConfig:Hi,inputs:h(nr),transactions:h(as)});function tn(n){var e;const t=n.inputs.map((r,i)=>{if(r.Object)return{kind:"Input",index:i,value:{Object:r.Object.ImmOrOwnedObject?{ImmOrOwned:r.Object.ImmOrOwnedObject}:r.Object.Receiving?{Receiving:{digest:r.Object.Receiving.digest,version:r.Object.Receiving.version,objectId:r.Object.Receiving.objectId}}:{Shared:{mutable:r.Object.SharedObject.mutable,initialSharedVersion:r.Object.SharedObject.initialSharedVersion,objectId:r.Object.SharedObject.objectId}}},type:"object"};if(r.Pure)return{kind:"Input",index:i,value:{Pure:Array.from(V(r.Pure.bytes))},type:"pure"};if(r.UnresolvedPure)return{kind:"Input",type:"pure",index:i,value:r.UnresolvedPure.value};if(r.UnresolvedObject)return{kind:"Input",type:"object",index:i,value:r.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:n.sender??void 0,expiration:((e=n.expiration)==null?void 0:e.$kind)==="Epoch"?{Epoch:Number(n.expiration.Epoch)}:n.expiration?{None:!0}:null,gasConfig:{owner:n.gasData.owner??void 0,budget:n.gasData.budget??void 0,price:n.gasData.price??void 0,payment:n.gasData.payment??void 0},inputs:t,transactions:n.commands.map(r=>{if(r.MakeMoveVec)return{kind:"MakeMoveVec",type:r.MakeMoveVec.type===null?{None:!0}:{Some:H.parseFromStr(r.MakeMoveVec.type)},objects:r.MakeMoveVec.elements.map(i=>X(i,t))};if(r.MergeCoins)return{kind:"MergeCoins",destination:X(r.MergeCoins.destination,t),sources:r.MergeCoins.sources.map(i=>X(i,t))};if(r.MoveCall)return{kind:"MoveCall",target:`${r.MoveCall.package}::${r.MoveCall.module}::${r.MoveCall.function}`,typeArguments:r.MoveCall.typeArguments,arguments:r.MoveCall.arguments.map(i=>X(i,t))};if(r.Publish)return{kind:"Publish",modules:r.Publish.modules.map(i=>Array.from(V(i))),dependencies:r.Publish.dependencies};if(r.SplitCoins)return{kind:"SplitCoins",coin:X(r.SplitCoins.coin,t),amounts:r.SplitCoins.amounts.map(i=>X(i,t))};if(r.TransferObjects)return{kind:"TransferObjects",objects:r.TransferObjects.objects.map(i=>X(i,t)),address:X(r.TransferObjects.address,t)};if(r.Upgrade)return{kind:"Upgrade",modules:r.Upgrade.modules.map(i=>Array.from(V(i))),dependencies:r.Upgrade.dependencies,packageId:r.Upgrade.package,ticket:X(r.Upgrade.ticket,t)};throw new Error(`Unknown transaction ${Object.keys(r)}`)})}}function X(n,e){if(n.$kind==="GasCoin")return{kind:"GasCoin"};if(n.$kind==="Result")return{kind:"Result",index:n.Result};if(n.$kind==="NestedResult")return{kind:"NestedResult",index:n.NestedResult[0],resultIndex:n.NestedResult[1]};if(n.$kind==="Input")return e[n.Input];throw new Error(`Invalid argument ${Object.keys(n)}`)}function os(n){var e,t,r;return $(Ye,{version:2,sender:n.sender??null,expiration:n.expiration?"Epoch"in n.expiration?{Epoch:n.expiration.Epoch}:{None:!0}:null,gasData:{owner:n.gasConfig.owner??null,budget:((e=n.gasConfig.budget)==null?void 0:e.toString())??null,price:((t=n.gasConfig.price)==null?void 0:t.toString())??null,payment:((r=n.gasConfig.payment)==null?void 0:r.map(i=>({digest:i.digest,objectId:i.objectId,version:i.version.toString()})))??null},inputs:n.inputs.map(i=>{if(i.kind==="Input"){if(kt(Yt,i.value)){const s=$(Yt,i.value);if(s.Object){if(s.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:s.Object.ImmOrOwned.objectId,version:String(s.Object.ImmOrOwned.version),digest:s.Object.ImmOrOwned.digest}}};if(s.Object.Shared)return{Object:{SharedObject:{mutable:s.Object.Shared.mutable??null,initialSharedVersion:s.Object.Shared.initialSharedVersion,objectId:s.Object.Shared.objectId}}};if(s.Object.Receiving)return{Object:{Receiving:{digest:s.Object.Receiving.digest,version:String(s.Object.Receiving.version),objectId:s.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:T(new Uint8Array(s.Pure))}}}return i.type==="object"?{UnresolvedObject:{objectId:i.value}}:{UnresolvedPure:{value:i.value}}}throw new Error("Invalid input")}),commands:n.transactions.map(i=>{switch(i.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in i.type?H.tagToString(i.type.Some):null,elements:i.objects.map(s=>Y(s))}};case"MergeCoins":return{MergeCoins:{destination:Y(i.destination),sources:i.sources.map(s=>Y(s))}};case"MoveCall":{const[s,o,c]=i.target.split("::");return{MoveCall:{package:s,module:o,function:c,typeArguments:i.typeArguments,arguments:i.arguments.map(u=>Y(u))}}}case"Publish":return{Publish:{modules:i.modules.map(s=>T(Uint8Array.from(s))),dependencies:i.dependencies}};case"SplitCoins":return{SplitCoins:{coin:Y(i.coin),amounts:i.amounts.map(s=>Y(s))}};case"TransferObjects":return{TransferObjects:{objects:i.objects.map(s=>Y(s)),address:Y(i.address)}};case"Upgrade":return{Upgrade:{modules:i.modules.map(s=>T(Uint8Array.from(s))),dependencies:i.dependencies,package:i.packageId,ticket:Y(i.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(i)}`)})})}function Y(n){switch(n.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:n.index};case"NestedResult":return{NestedResult:[n.index,n.resultIndex]};case"Input":return{Input:n.index}}}function Le(n){return U(Object.entries(n).map(([e,t])=>l({[e]:t})))}const D=Le({GasCoin:f(!0),Input:S(x(),M()),Result:S(x(),M()),NestedResult:Rt([S(x(),M()),S(x(),M())])}),us=l({budget:v(B),price:v(B),owner:v(xe),payment:v(h(ue))}),cs=l({package:z,module:m(),function:m(),typeArguments:h(m()),arguments:h(D)}),ls=l({name:m(),inputs:qe(m(),U([D,h(D)])),data:qe(m(),me())}),ds=Le({MoveCall:cs,TransferObjects:l({objects:h(D),address:D}),SplitCoins:l({coin:D,amounts:h(D)}),MergeCoins:l({destination:D,sources:h(D)}),Publish:l({modules:h(ye),dependencies:h(z)}),MakeMoveVec:l({type:v(m()),elements:h(D)}),Upgrade:l({modules:h(ye),dependencies:h(z),package:z,ticket:D}),$Intent:ls}),ps=Le({ImmOrOwnedObject:ue,SharedObject:l({objectId:z,initialSharedVersion:B,mutable:dt()}),Receiving:ue}),hs=Le({Object:ps,Pure:l({bytes:ye}),UnresolvedPure:l({value:me()}),UnresolvedObject:l({objectId:z,version:A(v(B)),digest:A(v(m())),initialSharedVersion:A(v(B))})}),gs=Le({None:f(!0),Epoch:B}),fs=l({version:f(2),sender:Ee(xe),expiration:Ee(gs),gasData:us,inputs:h(hs),commands:h(ds)}),ms=50,ys=1000n,bs=5e10;async function ws(n,e,t){return await Os(n,e),await js(n,e),e.onlyTransactionKind||(await vs(n,e),await ks(n,e),await Ss(n,e)),await Is(n),await t()}async function vs(n,e){n.gasConfig.price||(n.gasConfig.price=String(await Ge(e).getReferenceGasPrice()))}async function ks(n,e){if(n.gasConfig.budget)return;const t=await Ge(e).dryRunTransactionBlock({transactionBlock:n.build({overrides:{gasData:{budget:String(bs),payment:[]}}})});if(t.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${t.effects.status.error}`,{cause:t});const r=ys*BigInt(n.gasConfig.price||1n),i=BigInt(t.effects.gasUsed.computationCost)+r,s=i+BigInt(t.effects.gasUsed.storageCost)-BigInt(t.effects.gasUsed.storageRebate);n.gasConfig.budget=String(s>i?s:i)}async function Ss(n,e){if(!n.gasConfig.payment){const t=(await Ge(e).getCoins({owner:n.gasConfig.owner||n.sender,coinType:Gr})).data.filter(r=>!n.inputs.find(i=>{var s;return(s=i.Object)!=null&&s.ImmOrOwnedObject?r.coinObjectId===i.Object.ImmOrOwnedObject.objectId:!1})).map(r=>({objectId:r.coinObjectId,digest:r.digest,version:r.version}));if(!t.length)throw new Error("No valid gas coins found for the transaction.");n.gasConfig.payment=t.map(r=>$(ue,r))}}async function js(n,e){const t=n.inputs.filter(d=>{var p;return d.UnresolvedObject&&!(d.UnresolvedObject.version||(p=d.UnresolvedObject)!=null&&p.initialSharedVersion)}),r=[...new Set(t.map(d=>Q(d.UnresolvedObject.objectId)))],i=r.length?$s(r,ms):[],s=(await Promise.all(i.map(d=>Ge(e).multiGetObjects({ids:d,options:{showOwner:!0}})))).flat(),o=new Map(r.map((d,p)=>[d,s[p]])),c=Array.from(o).filter(([d,p])=>p.error).map(([d,p])=>JSON.stringify(p.error));if(c.length)throw new Error(`The following input objects are invalid: ${c.join(", ")}`);const u=s.map(d=>{if(d.error||!d.data)throw new Error(`Failed to fetch object: ${d.error}`);const p=d.data.owner,j=p&&typeof p=="object"&&"Shared"in p?p.Shared.initial_shared_version:null;return{objectId:d.data.objectId,digest:d.data.digest,version:d.data.version,initialSharedVersion:j}}),g=new Map(r.map((d,p)=>[d,u[p]]));for(const[d,p]of n.inputs.entries()){if(!p.UnresolvedObject)continue;let j;const E=k(p.UnresolvedObject.objectId),P=g.get(E);p.UnresolvedObject.initialSharedVersion??(P==null?void 0:P.initialSharedVersion)?j=ie.SharedObjectRef({objectId:E,initialSharedVersion:p.UnresolvedObject.initialSharedVersion||(P==null?void 0:P.initialSharedVersion),mutable:Es(n,d)}):xs(n,d)&&(j=ie.ReceivingRef({objectId:E,digest:p.UnresolvedObject.digest??(P==null?void 0:P.digest),version:p.UnresolvedObject.version??(P==null?void 0:P.version)})),n.inputs[n.inputs.indexOf(p)]=j??ie.ObjectRef({objectId:E,digest:p.UnresolvedObject.digest??(P==null?void 0:P.digest),version:p.UnresolvedObject.version??(P==null?void 0:P.version)})}}async function Os(n,e){const{inputs:t,commands:r}=n,i=[],s=new Set;r.forEach(c=>{if(c.MoveCall){if(c.MoveCall._argumentTypes)return;if(c.MoveCall.arguments.map(u=>u.$kind==="Input"?n.inputs[u.Input]:null).some(u=>(u==null?void 0:u.UnresolvedPure)||(u==null?void 0:u.UnresolvedObject))){const u=`${c.MoveCall.package}::${c.MoveCall.module}::${c.MoveCall.function}`;s.add(u),i.push(c.MoveCall)}}switch(c.$kind){case"SplitCoins":c.SplitCoins.amounts.forEach(u=>{nn(u,y.U64,n)});break;case"TransferObjects":nn(c.TransferObjects.address,y.Address,n);break}});const o=new Map;if(s.size>0){const c=Ge(e);await Promise.all([...s].map(async u=>{const[g,d,p]=u.split("::"),j=await c.getNormalizedMoveFunction({package:g,module:d,function:p});o.set(u,j.parameters.map(E=>Bi(E)))}))}i.length&&await Promise.all(i.map(async c=>{const u=o.get(`${c.package}::${c.module}::${c.function}`);if(!u)return;const g=u.length>0&&Ai(u.at(-1))?u.slice(0,u.length-1):u;c._argumentTypes=g})),r.forEach(c=>{if(!c.MoveCall)return;const u=c.MoveCall,g=`${u.package}::${u.module}::${u.function}`,d=u._argumentTypes;if(d){if(d.length!==c.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${g}`);d.forEach((p,j)=>{var E,P;const L=u.arguments[j];if(L.$kind!=="Input")return;const G=t[L.Input];if(!G.UnresolvedPure&&!G.UnresolvedObject)return;const ae=((E=G.UnresolvedPure)==null?void 0:E.value)??((P=G.UnresolvedObject)==null?void 0:P.objectId),Gt=vt(p.body);if(Gt){L.type="pure",t[t.indexOf(G)]=ie.Pure(Gt.serialize(ae));return}if(typeof ae!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(ae,null,2)}`);L.type="object";const yr=G.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:ae}}:G;t[L.Input]=yr})}})}function Is(n){n.inputs.forEach((e,t)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${t} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}function nn(n,e,t){if(n.$kind!=="Input")return;const r=t.inputs[n.Input];r.$kind==="UnresolvedPure"&&(t.inputs[n.Input]=ie.Pure(e.serialize(r.UnresolvedPure.value)))}function Es(n,e){let t=!1;return n.getInputUses(e,(r,i)=>{if(i.MoveCall&&i.MoveCall._argumentTypes){const s=i.MoveCall.arguments.indexOf(r);t=i.MoveCall._argumentTypes[s].ref!=="&"||t}(i.$kind==="MakeMoveVec"||i.$kind==="MergeCoins"||i.$kind==="SplitCoins")&&(t=!0)}),t}function xs(n,e){let t=!1;return n.getInputUses(e,(r,i)=>{if(i.MoveCall&&i.MoveCall._argumentTypes){const s=i.MoveCall.arguments.indexOf(r);t=Cs(i.MoveCall._argumentTypes[s])||t}}),t}function Cs(n){return typeof n.body!="object"||!("datatype"in n.body)?!1:n.body.datatype.package==="0x2"&&n.body.datatype.module==="transfer"&&n.body.datatype.type==="Receiving"}function Ge(n){if(!n.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return n.client}function $s(n,e){return Array.from({length:Math.ceil(n.length/e)},(t,r)=>n.slice(r*e,r*e+e))}function Ms(n){function e(t){return n(t)}return e.system=()=>e("0x5"),e.clock=()=>e("0x6"),e.random=()=>e("0x8"),e.denyList=()=>e("0x403"),e.option=({type:t,value:r})=>i=>i.moveCall({typeArguments:[t],target:`0x1::option::${r===null?"none":"some"}`,arguments:r===null?[]:[i.object(r)]}),e}function Ts(n){function e(t,r){if(typeof t=="string")return n(Ae(t).serialize(r));if(t instanceof Uint8Array||Mt(t))return n(t);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return e.u8=t=>n(y.U8.serialize(t)),e.u16=t=>n(y.U16.serialize(t)),e.u32=t=>n(y.U32.serialize(t)),e.u64=t=>n(y.U64.serialize(t)),e.u128=t=>n(y.U128.serialize(t)),e.u256=t=>n(y.U256.serialize(t)),e.bool=t=>n(y.Bool.serialize(t)),e.string=t=>n(y.String.serialize(t)),e.address=t=>n(y.Address.serialize(t)),e.id=e.address,e.vector=(t,r)=>n(y.vector(Ae(t)).serialize(r)),e.option=(t,r)=>n(y.option(Ae(t)).serialize(r)),e}function Ps(n,e){const t=Array.from(`${n}::`).map(i=>i.charCodeAt(0)),r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),rt(r,{dkLen:32})}function rn(n){return k(n).replace("0x","")}let Ce=class ve{constructor(e){this.version=2,this.sender=(e==null?void 0:e.sender)??null,this.expiration=(e==null?void 0:e.expiration)??null,this.inputs=(e==null?void 0:e.inputs)??[],this.commands=(e==null?void 0:e.commands)??[],this.gasData=(e==null?void 0:e.gasData)??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){const t=y.TransactionKind.parse(e).ProgrammableTransaction;if(!t)throw new Error("Unable to deserialize from bytes.");return ve.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:t.inputs,commands:t.commands})}static fromBytes(e){const t=y.TransactionData.parse(e),r=t==null?void 0:t.V1,i=r.kind.ProgrammableTransaction;if(!r||!i)throw new Error("Unable to deserialize from bytes.");return ve.restore({version:2,sender:r.sender,expiration:r.expiration,gasData:r.gasData,inputs:i.inputs,commands:i.commands})}static restore(e){return e.version===2?new ve($(Ye,e)):new ve($(Ye,os(e)))}static getDigestFromBytes(e){const t=Ps("TransactionData",e);return $t(t)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:t,onlyTransactionKind:r}={}){const i=this.inputs,s=this.commands,o={ProgrammableTransaction:{inputs:i,commands:s}};if(r)return y.TransactionKind.serialize(o,{maxSize:e}).toBytes();const c=(t==null?void 0:t.expiration)??this.expiration,u=(t==null?void 0:t.sender)??this.sender,g={...this.gasData,...t==null?void 0:t.gasConfig,...t==null?void 0:t.gasData};if(!u)throw new Error("Missing transaction sender");if(!g.budget)throw new Error("Missing gas budget");if(!g.payment)throw new Error("Missing gas payment");if(!g.price)throw new Error("Missing gas price");const d={sender:rn(u),expiration:c||{None:!0},gasData:{payment:g.payment,owner:rn(this.gasData.owner??u),price:BigInt(g.price),budget:BigInt(g.budget)},kind:{ProgrammableTransaction:{inputs:i,commands:s}}};return y.TransactionData.serialize({V1:d},{maxSize:e}).toBytes()}addInput(e,t){const r=this.inputs.length;return this.inputs.push(t),{Input:r,type:e,$kind:"Input"}}getInputUses(e,t){this.mapArguments((r,i)=>(r.$kind==="Input"&&r.Input===e&&t(r,i),r))}mapArguments(e){for(const t of this.commands)switch(t.$kind){case"MoveCall":t.MoveCall.arguments=t.MoveCall.arguments.map(i=>e(i,t));break;case"TransferObjects":t.TransferObjects.objects=t.TransferObjects.objects.map(i=>e(i,t)),t.TransferObjects.address=e(t.TransferObjects.address,t);break;case"SplitCoins":t.SplitCoins.coin=e(t.SplitCoins.coin,t),t.SplitCoins.amounts=t.SplitCoins.amounts.map(i=>e(i,t));break;case"MergeCoins":t.MergeCoins.destination=e(t.MergeCoins.destination,t),t.MergeCoins.sources=t.MergeCoins.sources.map(i=>e(i,t));break;case"MakeMoveVec":t.MakeMoveVec.elements=t.MakeMoveVec.elements.map(i=>e(i,t));break;case"Upgrade":t.Upgrade.ticket=e(t.Upgrade.ticket,t);break;case"$Intent":const r=t.$Intent.inputs;t.$Intent.inputs={};for(const[i,s]of Object.entries(r))t.$Intent.inputs[i]=Array.isArray(s)?s.map(o=>e(o,t)):e(s,t);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${t.$kind}`)}}replaceCommand(e,t){if(!Array.isArray(t)){this.commands[e]=t;return}const r=t.length-1;this.commands.splice(e,1,...t),r!==0&&this.mapArguments(i=>{switch(i.$kind){case"Result":i.Result>e&&(i.Result+=r);break;case"NestedResult":i.NestedResult[0]>e&&(i.NestedResult[0]+=r);break}return i})}getDigest(){const e=this.build({onlyTransactionKind:!1});return ve.getDigestFromBytes(e)}snapshot(){return $(Ye,this)}};function sn(n){if(typeof n=="string")return k(n);if(n.Object)return n.Object.ImmOrOwnedObject?k(n.Object.ImmOrOwnedObject.objectId):n.Object.Receiving?k(n.Object.Receiving.objectId):k(n.Object.SharedObject.objectId);if(n.UnresolvedObject)return k(n.UnresolvedObject.objectId)}var rr=n=>{throw TypeError(n)},Vt=(n,e,t)=>e.has(n)||rr("Cannot "+t),b=(n,e,t)=>(Vt(n,e,"read from private field"),t?t.call(n):e.get(n)),$e=(n,e,t)=>e.has(n)?rr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),de=(n,e,t,r)=>(Vt(n,e,"write to private field"),e.set(n,t),t),te=(n,e,t)=>(Vt(n,e,"access private method"),t),Ue,Re,he,w,q,et,Dt,Ot,qt;function an(n,e=1/0){const t={$kind:"Result",Result:n},r=[],i=s=>r[s]??(r[s]={$kind:"NestedResult",NestedResult:[n,s]});return new Proxy(t,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(s,o){if(o in s)return Reflect.get(s,o);if(o===Symbol.iterator)return function*(){let u=0;for(;u<e;)yield i(u),u++};if(typeof o=="symbol")return;const c=parseInt(o,10);if(!(Number.isNaN(c)||c<0))return i(c)}})}const ir=Symbol.for("@mysten/transaction");function sr(n){return!!n&&typeof n=="object"&&n[ir]===!0}const on={buildPlugins:new Map,serializationPlugins:new Map},yt=Symbol.for("@mysten/transaction/registry");function Me(){try{const n=globalThis;return n[yt]||(n[yt]=on),n[yt]}catch{return on}}const Us=class It{constructor(){$e(this,q),$e(this,Ue),$e(this,Re),$e(this,he,new Map),$e(this,w),this.object=Ms(t=>{var r,i;if(typeof t=="function")return this.object(t(this));if(typeof t=="object"&&kt(O,t))return t;const s=sn(t),o=b(this,w).inputs.find(c=>s===sn(c));return(r=o==null?void 0:o.Object)!=null&&r.SharedObject&&typeof t=="object"&&(i=t.Object)!=null&&i.SharedObject&&(o.Object.SharedObject.mutable=o.Object.SharedObject.mutable||t.Object.SharedObject.mutable),o?{$kind:"Input",Input:b(this,w).inputs.indexOf(o),type:"object"}:b(this,w).addInput("object",typeof t=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:k(t)}}:t)});const e=Me();de(this,w,new Ce),de(this,Re,[...e.buildPlugins.values()]),de(this,Ue,[...e.serializationPlugins.values()])}static fromKind(e){const t=new It;return de(t,w,Ce.fromKindBytes(typeof e=="string"?V(e):e)),t}static from(e){const t=new It;return sr(e)?de(t,w,new Ce(e.getData())):typeof e!="string"||!e.startsWith("{")?de(t,w,Ce.fromBytes(typeof e=="string"?V(e):e)):de(t,w,Ce.restore(JSON.parse(e))),t}static registerGlobalSerializationPlugin(e,t){Me().serializationPlugins.set(e,t??e)}static unregisterGlobalSerializationPlugin(e){Me().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,t){Me().buildPlugins.set(e,t??e)}static unregisterGlobalBuildPlugin(e){Me().buildPlugins.delete(e)}addSerializationPlugin(e){b(this,Ue).push(e)}addBuildPlugin(e){b(this,Re).push(e)}addIntentResolver(e,t){if(b(this,he).has(e)&&b(this,he).get(e)!==t)throw new Error(`Intent resolver for ${e} already exists`);b(this,he).set(e,t)}setSender(e){b(this,w).sender=e}setSenderIfNotSet(e){b(this,w).sender||(b(this,w).sender=e)}setExpiration(e){b(this,w).expiration=e?$(tr,e):null}setGasPrice(e){b(this,w).gasConfig.price=String(e)}setGasBudget(e){b(this,w).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){b(this,w).gasData.budget==null&&(b(this,w).gasConfig.budget=String(e))}setGasOwner(e){b(this,w).gasConfig.owner=e}setGasPayment(e){b(this,w).gasConfig.payment=e.map(t=>$(ue,t))}get blockData(){return tn(b(this,w).snapshot())}getData(){return b(this,w).snapshot()}get[ir](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:Ts(e=>Mt(e)?b(this,w).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):b(this,w).addInput("pure",kt(Xt,e)?$(Xt,e):e instanceof Uint8Array?ie.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(ie.ObjectRef(...e))}receivingRef(...e){return this.object(ie.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(ie.SharedObjectRef(...e))}add(e){if(typeof e=="function")return e(this);const t=b(this,w).commands.push(e);return an(t-1)}splitCoins(e,t){const r=le.SplitCoins(typeof e=="string"?this.object(e):te(this,q,Dt).call(this,e),t.map(s=>typeof s=="number"||typeof s=="bigint"||typeof s=="string"?this.pure.u64(s):te(this,q,et).call(this,s))),i=b(this,w).commands.push(r);return an(i-1,t.length)}mergeCoins(e,t){return this.add(le.MergeCoins(this.object(e),t.map(r=>this.object(r))))}publish({modules:e,dependencies:t}){return this.add(le.Publish({modules:e,dependencies:t}))}upgrade({modules:e,dependencies:t,package:r,ticket:i}){return this.add(le.Upgrade({modules:e,dependencies:t,package:r,ticket:this.object(i)}))}moveCall({arguments:e,...t}){return this.add(le.MoveCall({...t,arguments:e==null?void 0:e.map(r=>te(this,q,et).call(this,r))}))}transferObjects(e,t){return this.add(le.TransferObjects(e.map(r=>this.object(r)),typeof t=="string"?this.pure.address(t):te(this,q,et).call(this,t)))}makeMoveVec({type:e,elements:t}){return this.add(le.MakeMoveVec({type:e,elements:t.map(r=>this.object(r))}))}serialize(){return JSON.stringify(tn(b(this,w).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify($(fs,b(this,w).snapshot()),(t,r)=>typeof r=="bigint"?r.toString():r,2)}async sign(e){const{signer:t,...r}=e,i=await this.build(r);return t.signTransaction(i)}async build(e={}){return await this.prepareForSerialization(e),await te(this,q,Ot).call(this,e),b(this,w).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await te(this,q,Ot).call(this,e),b(this,w).getDigest()}async prepareForSerialization(e){var t;const r=new Set;for(const s of b(this,w).commands)s.$Intent&&r.add(s.$Intent.name);const i=[...b(this,Ue)];for(const s of r)if(!((t=e.supportedIntents)!=null&&t.includes(s))){if(!b(this,he).has(s))throw new Error(`Missing intent resolver for ${s}`);i.push(b(this,he).get(s))}await te(this,q,qt).call(this,i,e)}};Ue=new WeakMap;Re=new WeakMap;he=new WeakMap;w=new WeakMap;q=new WeakSet;et=function(n){return Mt(n)?this.pure(n):te(this,q,Dt).call(this,n)};Dt=function(n){return typeof n=="function"?$(O,n(this)):$(O,n)};Ot=async function(n){if(!n.onlyTransactionKind&&!b(this,w).sender)throw new Error("Missing transaction sender");await te(this,q,qt).call(this,[...b(this,Re),ws],n)};qt=async function(n,e){const t=r=>{if(r>=n.length)return()=>{};const i=n[r];return async()=>{const s=t(r+1);let o=!1,c=!1;if(await i(b(this,w),e,async()=>{if(o)throw new Error(`next() was call multiple times in TransactionPlugin ${r}`);o=!0,await s(),c=!0}),!o)throw new Error(`next() was not called in TransactionPlugin ${r}`);if(!c)throw new Error(`next() was not awaited in TransactionPlugin ${r}`)}};await t(0)()};let As=Us;const Bs=Symbol.for("@mysten/SuiClient");class zs{get[Bs](){return!0}constructor(e){this.transport=e.transport??new Ii({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!ne(k(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!ne(k(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!ne(k(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!ne(k(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,t){return await this.transport.request({method:e,params:t})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!ne(k(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!Je(Q(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){if(e.ids.forEach(t=>{if(!t||!Je(Q(t)))throw new Error(`Invalid Sui Object id ${t}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"]})}async getTransactionBlock(e){if(!Zt(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){if(e.digests.forEach(t=>{if(!Zt(t))throw new Error(`Invalid Transaction digest ${t}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock({transactionBlock:e,signature:t,options:r,requestType:i}){const s=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e=="string"?e:T(e),Array.isArray(t)?t:[t],r]});if(i==="WaitForLocalExecution")try{await this.waitForTransaction({digest:s.digest})}catch{}return s}async signAndExecuteTransaction({transaction:e,signer:t,...r}){let i;e instanceof Uint8Array?i=e:(e.setSenderIfNotSet(t.toSuiAddress()),i=await e.build({client:this}));const{signature:s,bytes:o}=await t.signTransaction(i);return this.executeTransactionBlock({transactionBlock:o,signature:s,...r})}async getTotalTransactionBlocks(){const e=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){const e=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(e)}async getStakes(e){if(!e.owner||!ne(k(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach(t=>{if(!t||!Je(Q(t)))throw new Error(`Invalid Sui Stake id ${t}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){var t;let r;if(sr(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),r=T(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")r=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)r=T(e.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,r,(t=e.gasPrice)==null?void 0:t.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:T(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!Je(Q(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){const e=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e==null?void 0:e.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e==null?void 0:e.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e==null?void 0:e.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const e=await this.getCheckpoint({id:"0"}),t=nt(e.digest);return Ne(t.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames({format:e="dot",...t}){const{nextCursor:r,hasNextPage:i,data:s}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[t.address,t.cursor,t.limit]});return{hasNextPage:i,nextCursor:r,data:s.map(o=>Fr(o,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e==null?void 0:e.version]})}async waitForTransaction({signal:e,timeout:t=60*1e3,pollInterval:r=2*1e3,...i}){const s=AbortSignal.timeout(t),o=new Promise((c,u)=>{s.addEventListener("abort",()=>u(s.reason))});for(o.catch(()=>{});!s.aborted;){e==null||e.throwIfAborted();try{return await this.getTransactionBlock(i)}catch{await Promise.race([new Promise(c=>setTimeout(c,r)),o])}}throw s.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}}class ar extends wr{}const Kt="Sui",or=n=>{var e;const t=(e=n.data)==null?void 0:e.content;return t&&t.dataType==="moveObject"?t.fields:null},ga=(n,e)=>{try{return Jt(n)===Jt(e)}catch{return!1}},fa=n=>(n==null?void 0:n.type)==="created",ma=n=>(n==null?void 0:n.type)==="published";function _s(n){return Array.isArray(n)}function Wt(n){return!Array.isArray(n)&&typeof n=="object"&&"fields"in n&&"type"in n}function Rs(n){return typeof n=="object"&&!_s(n)&&!Wt(n)}function ya(n){return typeof n=="object"&&"id"in n}const ba=async(n,e)=>{const{data:t,error:r}=await n.getObject({id:e,options:{showContent:!0}});if(r)throw new Error("Error getting object: "+r);if(!t||!Wt(t.content))throw new Error(`Cannot get oject for state id ${e}: `+t);return vr(t.content.type)},Ns=async(n,e)=>{if(!ne(e))throw new Error(`Invalid object ID: ${e}`);const t=await n.getObject({id:e,options:{showContent:!0}});return or(t)},wa=async(n,e)=>{let t,r;do{const o=await n.getDynamicFields({parentId:e,cursor:r});t=o.data.find(c=>c.name.type.endsWith("CurrentPackage")),r=o.hasNextPage?o.nextCursor:null}while(r&&!t);if(!t)throw new Error("CurrentPackage not found");const i=await n.getObject({id:t.objectId,options:{showContent:!0}}),s=or(i);if(!s||!Rs(s))throw new Error("Unable to get fields from object response");if(!("value"in s)||!Wt(s.value))throw new Error("Unable to get package id");return s.value.fields.package},va=async(n,e,t)=>{let r=null,i=null,s=null,o;do{if(s=await n.getOwnedObjects({owner:t,filter:{StructType:`${e}::emitter::EmitterCap`},options:{showContent:!0},cursor:o}),!s||!s.data)throw Error("Failed to get owned objects");for(const c of s.data){if(!c.data)continue;const{version:u,objectId:g}=c.data;(r===null||u<r)&&(r=u,i=g)}o=s.hasNextPage?s.nextCursor:void 0}while(o);return i},ka=async(n,e)=>{const t=new As,[r]=t.publish({modules:n.modules.map(i=>Array.from(kr.decode(i))),dependencies:n.dependencies.map(i=>Q(i))});return t.transferObjects([r],t.pure.address(e)),t},ur=class ge extends Sr{constructor(e,t){super(e,t??jr(e,ge._platform))}getRpc(e){if(e in this.config)return new zs({url:this.config[e].rpc});throw new Error("No configuration available for chain: "+e)}getChain(e){if(e in this.config)return new ar(e,this);throw new Error("No configuration available for chain: "+e)}static nativeTokenId(e,t){if(!ge.isSupportedChain(t))throw new Error(`invalid chain for ${Kt}: ${t}`);return Or.tokenId(t,Ir)}static isNativeTokenId(e,t,r){return!ge.isSupportedChain(t)||r.chain!==t?!1:this.nativeTokenId(e,t)===r}static isSupportedChain(e){return Er(e)===ge._platform}static async getDecimals(e,t,r){if(pt(r))return xr(ge._platform);const i=new Qe(r);try{const o=await Ns(t,i.toString());if(o&&"decimals"in o)return o.decimals}catch{}const s=await t.getCoinMetadata({coinType:i.toString()});if(s===null)throw new Error(`Can't fetch decimals for token ${i.toString()}`);return s.decimals}static async getCoins(e,t,r){let i=[],s=null;const o=new Qe(t).toString();do{const c=await e.getCoins({owner:o,coinType:r,cursor:s});i=[...i,...c.data],s=c.hasNextPage?c.nextCursor:null}while(s);return i}static async getBalance(e,t,r,i){if(pt(i)){const{totalBalance:o}=await t.getBalance({owner:r});return BigInt(o)}const{totalBalance:s}=await t.getBalance({owner:r,coinType:i.toString()});return BigInt(s)}static async getBalances(e,t,r,i){return(await Promise.all(i.map(async s=>{const o=await this.getBalance(e,t,r,s);return{[pt(s)?"native":new Qe(s).toString()]:o}}))).reduce((s,o)=>Object.assign(s,o),{})}static async sendWait(e,t,r){const i=[];for(const s of r){const o=await t.executeTransactionBlock(s);await t.waitForTransaction({digest:o.digest}),i.push(o.digest)}return i}static async getLatestBlock(e){return Number(await e.getLatestCheckpointSequenceNumber())}static async getLatestFinalizedBlock(e){return this.getLatestBlock(e)}static chainFromChainId(e){const t=Cr(ge._platform,e);if(t===void 0)throw new Error(`Unknown native chain id ${e}`);const[r,i]=t;return[r,i]}static async chainFromRpc(e){const t=await e.call("sui_getChainIdentifier",[]);return this.chainFromChainId(t)}};fn(ur,"_platform",Kt);let Et=ur;var Vs=Object.defineProperty,Ds=(n,e,t)=>e in n?Vs(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,He=(n,e,t)=>Ds(n,typeof e!="symbol"?e+"":e,t),Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.bech32m=We=Ke.bech32=void 0;const ct="qpzry9x8gf2tvdw0s3jn54khce6mua7l",cr={};for(let n=0;n<ct.length;n++){const e=ct.charAt(n);cr[e]=n}function Ie(n){const e=n>>25;return(n&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function un(n){let e=1;for(let t=0;t<n.length;++t){const r=n.charCodeAt(t);if(r<33||r>126)return"Invalid prefix ("+n+")";e=Ie(e)^r>>5}e=Ie(e);for(let t=0;t<n.length;++t){const r=n.charCodeAt(t);e=Ie(e)^r&31}return e}function Ft(n,e,t,r){let i=0,s=0;const o=(1<<t)-1,c=[];for(let u=0;u<n.length;++u)for(i=i<<e|n[u],s+=e;s>=t;)s-=t,c.push(i>>s&o);if(r)s>0&&c.push(i<<t-s&o);else{if(s>=e)return"Excess padding";if(i<<t-s&o)return"Non-zero padding"}return c}function qs(n){return Ft(n,8,5,!0)}function Ks(n){const e=Ft(n,5,8,!1);if(Array.isArray(e))return e}function Ws(n){const e=Ft(n,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}function lr(n){let e;n==="bech32"?e=1:e=734539939;function t(o,c,u){if(u=u||90,o.length+7+c.length>u)throw new TypeError("Exceeds length limit");o=o.toLowerCase();let g=un(o);if(typeof g=="string")throw new Error(g);let d=o+"1";for(let p=0;p<c.length;++p){const j=c[p];if(j>>5)throw new Error("Non 5-bit word");g=Ie(g)^j,d+=ct.charAt(j)}for(let p=0;p<6;++p)g=Ie(g);g^=e;for(let p=0;p<6;++p){const j=g>>(5-p)*5&31;d+=ct.charAt(j)}return d}function r(o,c){if(c=c||90,o.length<8)return o+" too short";if(o.length>c)return"Exceeds length limit";const u=o.toLowerCase(),g=o.toUpperCase();if(o!==u&&o!==g)return"Mixed-case string "+o;o=u;const d=o.lastIndexOf("1");if(d===-1)return"No separator character for "+o;if(d===0)return"Missing prefix for "+o;const p=o.slice(0,d),j=o.slice(d+1);if(j.length<6)return"Data too short";let E=un(p);if(typeof E=="string")return E;const P=[];for(let L=0;L<j.length;++L){const G=j.charAt(L),ae=cr[G];if(ae===void 0)return"Unknown character "+G;E=Ie(E)^ae,!(L+6>=j.length)&&P.push(ae)}return E!==e?"Invalid checksum for "+o:{prefix:p,words:P}}function i(o,c){const u=r(o,c);if(typeof u=="object")return u}function s(o,c){const u=r(o,c);if(typeof u=="object")return u;throw new Error(u)}return{decodeUnsafe:i,decode:s,encode:t,toWords:qs,fromWordsUnsafe:Ks,fromWords:Ws}}var We=Ke.bech32=lr("bech32");Ke.bech32m=lr("bech32m");function dr(n,e){return y.IntentMessage(y.fixedArray(e.length,y.u8())).serialize({intent:{scope:{[n]:!0},version:{V0:!0},appId:{Sui:!0}},value:e}).toBytes()}const Lt={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5,Passkey:6},Fs={ED25519:32,Secp256k1:33,Secp256r1:33},pr={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin",6:"Passkey"};function hr(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}class Ls{equals(e){return hr(this.toRawBytes(),e.toRawBytes())}toBase64(){return T(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){const e=this.toSuiBytes();return T(e)}verifyWithIntent(e,t,r){const i=dr(r,e),s=rt(i,{dkLen:32});return this.verify(s,t)}verifyPersonalMessage(e,t){return this.verifyWithIntent(y.vector(y.u8()).serialize(e).toBytes(),t,"PersonalMessage")}verifyTransaction(e,t){return this.verifyWithIntent(e,t,"TransactionData")}verifyAddress(e){return this.toSuiAddress()===e}toSuiBytes(){const e=this.toRawBytes(),t=new Uint8Array(e.length+1);return t.set([this.flag()]),t.set(e,1),t}toSuiAddress(){return k(Tr(rt(this.toSuiBytes(),{dkLen:32})).slice(0,pn*2))}}function Gs(n){const e=V(n),t=pr[e[0]];switch(t){case"ED25519":case"Secp256k1":case"Secp256r1":const r=Fs[t],i=e.slice(1,e.length-r),s=e.slice(1+i.length);return{serializedSignature:n,signatureScheme:t,signature:i,publicKey:s,bytes:e};default:throw new Error("Unsupported signature scheme")}}function Js({signature:n,signatureScheme:e,publicKey:t}){if(!t)throw new Error("`publicKey` is required");const r=t.toRawBytes(),i=new Uint8Array(1+n.length+r.length);return i.set([Lt[e]]),i.set(n,1),i.set(r,1+n.length),T(i)}const tt=32,gr="suiprivkey";class Zs{async signWithIntent(e,t){const r=dr(t,e),i=rt(r,{dkLen:32});return{signature:Js({signature:await this.sign(i),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:T(e)}}async signTransaction(e){return this.signWithIntent(e,"TransactionData")}async signPersonalMessage(e){const{signature:t}=await this.signWithIntent(a.vector(a.u8()).serialize(e).toBytes(),"PersonalMessage");return{bytes:T(e),signature:t}}toSuiAddress(){return this.getPublicKey().toSuiAddress()}}class Hs extends Zs{}function Qs(n){const{prefix:e,words:t}=We.decode(n);if(e!==gr)throw new Error("invalid private key prefix");const r=new Uint8Array(We.fromWords(t)),i=r.slice(1);return{schema:pr[r[0]],secretKey:i}}function Xs(n,e){if(n.length!==tt)throw new Error("Invalid bytes length");const t=Lt[e],r=new Uint8Array(n.length+1);return r.set([t]),r.set(n,1),We.encode(gr,We.toWords(r))}function cn(n){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(n)}function Ys(n){return Pr(n,"")}function ea(n){return Ne(Ys(n))}const ta="ed25519 seed",na=2147483648,ra=new RegExp("^m(\\/[0-9]+')+$"),fr=n=>n.replace("'",""),ia=n=>{const e=hn.create(gn,ta).update(Ct(n)).digest(),t=e.slice(0,32),r=e.slice(32);return{key:t,chainCode:r}},sa=({key:n,chainCode:e},t)=>{const r=new ArrayBuffer(4);new DataView(r).setUint32(0,t);const i=new Uint8Array(1+n.length+r.byteLength);i.set(new Uint8Array(1).fill(0)),i.set(n,1),i.set(new Uint8Array(r,0,r.byteLength),n.length+1);const s=hn.create(gn,e).update(i).digest(),o=s.slice(0,32),c=s.slice(32);return{key:o,chainCode:c}},aa=n=>ra.test(n)?!n.split("/").slice(1).map(fr).some(isNaN):!1,ln=(n,e,t=na)=>{if(!aa(n))throw new Error("Invalid derivation path");const{key:r,chainCode:i}=ia(e);return n.split("/").slice(1).map(fr).map(s=>parseInt(s,10)).reduce((s,o)=>sa(s,o+t),{key:r,chainCode:i})},xt=32;class mr extends Ls{constructor(e){if(super(),typeof e=="string"?this.data=V(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),this.data.length!==xt)throw new Error(`Invalid public key input. Expected ${xt} bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return Lt.ED25519}async verify(e,t){let r;if(typeof t=="string"){const i=Gs(t);if(i.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!hr(this.toRawBytes(),i.publicKey))throw new Error("Signature does not match public key");r=i.signature}else r=t;return ee.verify(r,e,this.toRawBytes())}}mr.SIZE=xt;const dn="m/44'/784'/0'/0'/0'";class Se extends Hs{constructor(e){if(super(),e)this.keypair={publicKey:e.publicKey,secretKey:e.secretKey.slice(0,32)};else{const t=ee.utils.randomPrivateKey();this.keypair={publicKey:ee.getPublicKey(t),secretKey:t}}}getKeyScheme(){return"ED25519"}static generate(){const e=ee.utils.randomPrivateKey();return new Se({publicKey:ee.getPublicKey(e),secretKey:e})}static fromSecretKey(e,t){if(typeof e=="string"){const s=Qs(e);if(s.schema!=="ED25519")throw new Error(`Expected a ED25519 keypair, got ${s.schema}`);return this.fromSecretKey(s.secretKey,t)}const r=e.length;if(r!==tt)throw new Error(`Wrong secretKey size. Expected ${tt} bytes, got ${r}.`);const i={publicKey:ee.getPublicKey(e),secretKey:e};if(!t||!t.skipValidation){const s=new TextEncoder().encode("sui validation"),o=ee.sign(s,e);if(!ee.verify(o,s,i.publicKey))throw new Error("provided secretKey is invalid")}return new Se(i)}getPublicKey(){return new mr(this.keypair.publicKey)}getSecretKey(){return Xs(this.keypair.secretKey.slice(0,tt),this.getKeyScheme())}async sign(e){return ee.sign(e,this.keypair.secretKey)}static deriveKeypair(e,t){if(t==null&&(t=dn),!cn(t))throw new Error("Invalid derivation path");const{key:r}=ln(t,ea(e));return Se.fromSecretKey(r)}static deriveKeypairFromSeed(e,t){if(t==null&&(t=dn),!cn(t))throw new Error("Invalid derivation path");const{key:r}=ln(t,e);return Se.fromSecretKey(r)}}async function oa(n,e){const[,t]=await Et.chainFromRpc(n);return new ua(t,n,Se.deriveKeypair(e,"m/44'/784'/0'/0'/0'"))}class ua{constructor(e,t,r,i){He(this,"_chain"),He(this,"_client"),He(this,"_signer"),He(this,"_debug"),this._chain=e,this._client=t,this._signer=r,this._debug=i}chain(){return this._chain}address(){return this._signer.toSuiAddress()}async signAndSend(e){const t=[];for(const r of e){const{description:i,transaction:s}=r;this._debug&&console.log(`Signing ${i} for ${this.address()}`);try{const o=await this._client.signAndExecuteTransaction({transaction:s,signer:this._signer});t.push(o.digest)}catch(o){throw o}}return t}}const ca={Address:Qe,Platform:Et,getSigner:oa,protocols:{WormholeCore:()=>ht(()=>import("./index-CrKGOs08-iJOFHPhe.js"),__vite__mapDeps([0,1,2,3,4])),TokenBridge:()=>ht(()=>import("./index-Cg5Ko9uq-D_fEt2Ko.js"),__vite__mapDeps([5,1,2,0,3,4,6])),CircleBridge:()=>ht(()=>import("./index-CRYNS9pm-BeJvQFa8.js"),__vite__mapDeps([7,1,2,6,3,4]))},getChain:(n,e,t)=>new ar(e,new Et(n,Mr(n,Kt,{[e]:t})))},Sa=Object.freeze(Object.defineProperty({__proto__:null,default:ca},Symbol.toStringTag,{value:"Module"}));export{Wt as A,ka as C,va as E,ya as I,ma as O,ga as S,wa as T,Et as X,As as c,Rs as f,ba as j,fa as k,Ns as p,or as q,Sa as s,ha as v,Gr as w};

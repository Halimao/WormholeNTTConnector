import{aa as bi,ab as yi,ac as gi,ad as wi,ae as vi,af as mi,ag as _i,ah as xi,ai as Ei,aj as Ai,a3 as Oi}from"./index-CNWcuxPc-C5KIuBWR.js";import{az as ot,aL as yr,aM as Bi,aC as Nt,aA as Si}from"./index-BGLdF6jF.js";var sr={exports:{}};(function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof ot<"u"&&ot,n=function(){function i(){this.fetch=!1,this.DOMException=r.DOMException}return i.prototype=r,new i}();(function(i){(function(a){var h=typeof i<"u"&&i||typeof self<"u"&&self||typeof ot<"u"&&ot||{},u={searchParams:"URLSearchParams"in h,iterable:"Symbol"in h&&"iterator"in Symbol,blob:"FileReader"in h&&"Blob"in h&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in h,arrayBuffer:"ArrayBuffer"in h};function p(c){return c&&DataView.prototype.isPrototypeOf(c)}if(u.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],y=ArrayBuffer.isView||function(c){return c&&d.indexOf(Object.prototype.toString.call(c))>-1};function m(c){if(typeof c!="string"&&(c=String(c)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(c)||c==="")throw new TypeError('Invalid character in header field name: "'+c+'"');return c.toLowerCase()}function v(c){return typeof c!="string"&&(c=String(c)),c}function g(c){var l={next:function(){var w=c.shift();return{done:w===void 0,value:w}}};return u.iterable&&(l[Symbol.iterator]=function(){return l}),l}function _(c){this.map={},c instanceof _?c.forEach(function(l,w){this.append(w,l)},this):Array.isArray(c)?c.forEach(function(l){if(l.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+l.length);this.append(l[0],l[1])},this):c&&Object.getOwnPropertyNames(c).forEach(function(l){this.append(l,c[l])},this)}_.prototype.append=function(c,l){c=m(c),l=v(l);var w=this.map[c];this.map[c]=w?w+", "+l:l},_.prototype.delete=function(c){delete this.map[m(c)]},_.prototype.get=function(c){return c=m(c),this.has(c)?this.map[c]:null},_.prototype.has=function(c){return this.map.hasOwnProperty(m(c))},_.prototype.set=function(c,l){this.map[m(c)]=v(l)},_.prototype.forEach=function(c,l){for(var w in this.map)this.map.hasOwnProperty(w)&&c.call(l,this.map[w],w,this)},_.prototype.keys=function(){var c=[];return this.forEach(function(l,w){c.push(w)}),g(c)},_.prototype.values=function(){var c=[];return this.forEach(function(l){c.push(l)}),g(c)},_.prototype.entries=function(){var c=[];return this.forEach(function(l,w){c.push([w,l])}),g(c)},u.iterable&&(_.prototype[Symbol.iterator]=_.prototype.entries);function C(c){if(!c._noBody){if(c.bodyUsed)return Promise.reject(new TypeError("Already read"));c.bodyUsed=!0}}function U(c){return new Promise(function(l,w){c.onload=function(){l(c.result)},c.onerror=function(){w(c.error)}})}function z(c){var l=new FileReader,w=U(l);return l.readAsArrayBuffer(c),w}function E(c){var l=new FileReader,w=U(l),x=/charset=([A-Za-z0-9_-]+)/.exec(c.type),B=x?x[1]:"utf-8";return l.readAsText(c,B),w}function P(c){for(var l=new Uint8Array(c),w=new Array(l.length),x=0;x<l.length;x++)w[x]=String.fromCharCode(l[x]);return w.join("")}function k(c){if(c.slice)return c.slice(0);var l=new Uint8Array(c.byteLength);return l.set(new Uint8Array(c)),l.buffer}function F(){return this.bodyUsed=!1,this._initBody=function(c){this.bodyUsed=this.bodyUsed,this._bodyInit=c,c?typeof c=="string"?this._bodyText=c:u.blob&&Blob.prototype.isPrototypeOf(c)?this._bodyBlob=c:u.formData&&FormData.prototype.isPrototypeOf(c)?this._bodyFormData=c:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(c)?this._bodyText=c.toString():u.arrayBuffer&&u.blob&&p(c)?(this._bodyArrayBuffer=k(c.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(c)||y(c))?this._bodyArrayBuffer=k(c):this._bodyText=c=Object.prototype.toString.call(c):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof c=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(c)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var c=C(this);if(c)return c;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var c=C(this);return c||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(u.blob)return this.blob().then(z);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var c=C(this);if(c)return c;if(this._bodyBlob)return E(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(P(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(st)}),this.json=function(){return this.text().then(JSON.parse)},this}var q=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function D(c){var l=c.toUpperCase();return q.indexOf(l)>-1?l:c}function M(c,l){if(!(this instanceof M))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');l=l||{};var w=l.body;if(c instanceof M){if(c.bodyUsed)throw new TypeError("Already read");this.url=c.url,this.credentials=c.credentials,l.headers||(this.headers=new _(c.headers)),this.method=c.method,this.mode=c.mode,this.signal=c.signal,!w&&c._bodyInit!=null&&(w=c._bodyInit,c.bodyUsed=!0)}else this.url=String(c);if(this.credentials=l.credentials||this.credentials||"same-origin",(l.headers||!this.headers)&&(this.headers=new _(l.headers)),this.method=D(l.method||this.method||"GET"),this.mode=l.mode||this.mode||null,this.signal=l.signal||this.signal||function(){if("AbortController"in h){var A=new AbortController;return A.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&w)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(w),(this.method==="GET"||this.method==="HEAD")&&(l.cache==="no-store"||l.cache==="no-cache")){var x=/([?&])_=[^&]*/;if(x.test(this.url))this.url=this.url.replace(x,"$1_="+new Date().getTime());else{var B=/\?/;this.url+=(B.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}M.prototype.clone=function(){return new M(this,{body:this._bodyInit})};function st(c){var l=new FormData;return c.trim().split("&").forEach(function(w){if(w){var x=w.split("="),B=x.shift().replace(/\+/g," "),A=x.join("=").replace(/\+/g," ");l.append(decodeURIComponent(B),decodeURIComponent(A))}}),l}function at(c){var l=new _,w=c.replace(/\r?\n[\t ]+/g," ");return w.split("\r").map(function(x){return x.indexOf(`
`)===0?x.substr(1,x.length):x}).forEach(function(x){var B=x.split(":"),A=B.shift().trim();if(A){var I=B.join(":").trim();try{l.append(A,I)}catch(N){console.warn("Response "+N.message)}}}),l}F.call(M.prototype);function $(c,l){if(!(this instanceof $))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(l||(l={}),this.type="default",this.status=l.status===void 0?200:l.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=l.statusText===void 0?"":""+l.statusText,this.headers=new _(l.headers),this.url=l.url||"",this._initBody(c)}F.call($.prototype),$.prototype.clone=function(){return new $(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new _(this.headers),url:this.url})},$.error=function(){var c=new $(null,{status:200,statusText:""});return c.ok=!1,c.status=0,c.type="error",c};var wt=[301,302,303,307,308];$.redirect=function(c,l){if(wt.indexOf(l)===-1)throw new RangeError("Invalid status code");return new $(null,{status:l,headers:{location:c}})},a.DOMException=h.DOMException;try{new a.DOMException}catch{a.DOMException=function(c,l){this.message=c,this.name=l;var w=Error(c);this.stack=w.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function vt(c,l){return new Promise(function(w,x){var B=new M(c,l);if(B.signal&&B.signal.aborted)return x(new a.DOMException("Aborted","AbortError"));var A=new XMLHttpRequest;function I(){A.abort()}A.onload=function(){var j={statusText:A.statusText,headers:at(A.getAllResponseHeaders()||"")};B.url.indexOf("file://")===0&&(A.status<200||A.status>599)?j.status=200:j.status=A.status,j.url="responseURL"in A?A.responseURL:j.headers.get("X-Request-URL");var S="response"in A?A.response:A.responseText;setTimeout(function(){w(new $(S,j))},0)},A.onerror=function(){setTimeout(function(){x(new TypeError("Network request failed"))},0)},A.ontimeout=function(){setTimeout(function(){x(new TypeError("Network request timed out"))},0)},A.onabort=function(){setTimeout(function(){x(new a.DOMException("Aborted","AbortError"))},0)};function N(j){try{return j===""&&h.location.href?h.location.href:j}catch{return j}}if(A.open(B.method,N(B.url),!0),B.credentials==="include"?A.withCredentials=!0:B.credentials==="omit"&&(A.withCredentials=!1),"responseType"in A&&(u.blob?A.responseType="blob":u.arrayBuffer&&(A.responseType="arraybuffer")),l&&typeof l.headers=="object"&&!(l.headers instanceof _||h.Headers&&l.headers instanceof h.Headers)){var R=[];Object.getOwnPropertyNames(l.headers).forEach(function(j){R.push(m(j)),A.setRequestHeader(j,v(l.headers[j]))}),B.headers.forEach(function(j,S){R.indexOf(S)===-1&&A.setRequestHeader(S,j)})}else B.headers.forEach(function(j,S){A.setRequestHeader(S,j)});B.signal&&(B.signal.addEventListener("abort",I),A.onreadystatechange=function(){A.readyState===4&&B.signal.removeEventListener("abort",I)}),A.send(typeof B._bodyInit>"u"?null:B._bodyInit)})}return vt.polyfill=!0,h.fetch||(h.fetch=vt,h.Headers=_,h.Request=M,h.Response=$),a.Headers=_,a.Request=M,a.Response=$,a.fetch=vt,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var o=r.fetch?r:n;e=o.fetch,e.default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,t.exports=e})(sr,sr.exports);var ji=sr.exports;const qr=yr(ji);function jn(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function df(t,e){e||(e=t.reduce((o,i)=>o+i.length,0));const r=jn(e);let n=0;for(const o of t)r.set(o,n),n+=o.length;return r}const $r={...bi,...yi,...gi,...wi,...vi,...mi,..._i,...xi,...Ei,...Ai};function Tn(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Vr=Tn("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Ze=Tn("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=jn(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Ln={utf8:Vr,"utf-8":Vr,hex:$r.base16,latin1:Ze,ascii:Ze,binary:Ze,...$r};function pf(t,e="utf8"){const r=Ln[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function bf(t,e="utf8"){const r=Ln[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var Wr=function(t,e,r){for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},Ti=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),Li=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=Nt.process.platform}return t}(),Pi=function(){function t(e,r,n,o){this.name=e,this.version=r,this.os=n,this.bot=o,this.type="bot-device"}return t}(),Ii=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Ci=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),zi=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Ui=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Gr=3,Ri=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",zi]],Kr=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function yf(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Ci:typeof navigator<"u"?Ni(navigator.userAgent):Di()}function Mi(t){return t!==""&&Ri.reduce(function(e,r){var n=r[0],o=r[1];if(e)return e;var i=o.exec(t);return!!i&&[n,i]},!1)}function Ni(t){var e=Mi(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new Ii;var o=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);o?o.length<Gr&&(o=Wr(Wr([],o,!0),Fi(Gr-o.length))):o=[];var i=o.join("."),a=ki(t),h=Ui.exec(t);return h&&h[1]?new Pi(r,i,a,h[1]):new Ti(r,i,a)}function ki(t){for(var e=0,r=Kr.length;e<r;e++){var n=Kr[e],o=n[0],i=n[1],a=i.exec(t);if(a)return o}return null}function Di(){var t=typeof Nt.process<"u"&&Nt.process.version;return t?new Li(Nt.process.version.slice(1)):null}function Fi(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}const gf={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};class wf{}const Hi=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,qi=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,$i=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Vi(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Wi(t);return}return e}function Wi(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function vf(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const r=t.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!$i.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Hi.test(t)||qi.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Vi)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function kt(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function Gi(t,e){let r;const n=()=>{if(r)return r;const o=indexedDB.open(t);return o.onupgradeneeded=()=>o.result.createObjectStore(e),r=kt(o),r.then(i=>{i.onclose=()=>r=void 0},()=>{}),r};return(o,i)=>n().then(a=>i(a.transaction(e,o).objectStore(e)))}let Ye;function ae(){return Ye||(Ye=Gi("keyval-store","keyval")),Ye}function mf(t,e=ae()){return e("readonly",r=>kt(r.get(t)))}function _f(t,e,r=ae()){return r("readwrite",n=>(n.put(e,t),kt(n.transaction)))}function xf(t,e=ae()){return e("readwrite",r=>(r.delete(t),kt(r.transaction)))}function Ef(t=ae()){return t("readwrite",e=>(e.clear(),kt(e.transaction)))}function Ki(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},kt(t.transaction)}function Af(t=ae()){return t("readonly",e=>{if(e.getAllKeys)return kt(e.getAllKeys());const r=[];return Ki(e,n=>r.push(n.key)).then(()=>r)})}const Zi=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),Yi=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function Pn(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return Yi(t)}catch{return t}}function ne(t){return typeof t=="string"?t:Zi(t)||""}function Ji(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var Xi=Qi;function Qi(t,e,r){var n=r&&r.stringify||Ji,o=1;if(typeof t=="object"&&t!==null){var i=e.length+o;if(i===1)return t;var a=new Array(i);a[0]=n(t);for(var h=1;h<i;h++)a[h]=n(e[h]);return a.join(" ")}if(typeof t!="string")return t;var u=e.length;if(u===0)return t;for(var p="",d=1-o,y=-1,m=t&&t.length||0,v=0;v<m;){if(t.charCodeAt(v)===37&&v+1<m){switch(y=y>-1?y:0,t.charCodeAt(v+1)){case 100:case 102:if(d>=u||e[d]==null)break;y<v&&(p+=t.slice(y,v)),p+=Number(e[d]),y=v+2,v++;break;case 105:if(d>=u||e[d]==null)break;y<v&&(p+=t.slice(y,v)),p+=Math.floor(Number(e[d])),y=v+2,v++;break;case 79:case 111:case 106:if(d>=u||e[d]===void 0)break;y<v&&(p+=t.slice(y,v));var g=typeof e[d];if(g==="string"){p+="'"+e[d]+"'",y=v+2,v++;break}if(g==="function"){p+=e[d].name||"<anonymous>",y=v+2,v++;break}p+=n(e[d]),y=v+2,v++;break;case 115:if(d>=u)break;y<v&&(p+=t.slice(y,v)),p+=String(e[d]),y=v+2,v++;break;case 37:y<v&&(p+=t.slice(y,v)),p+="%",y=v+2,v++,d--;break}++d}++v}return y===-1?t:(y<m&&(p+=t.slice(y)),p)}const Zr=Xi;var Vt=gt;const oe=cs().console||{},ts={mapHttpRequest:Oe,mapHttpResponse:Oe,wrapRequestSerializer:Je,wrapResponseSerializer:Je,wrapErrorSerializer:Je,req:Oe,res:Oe,err:is};function es(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function gt(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const r=t.browser.write||oe;t.browser.write&&(t.browser.asObject=!0);const n=t.serializers||{},o=es(t.browser.serialize,n);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const a=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),t.enabled===!1&&(t.level="silent");const h=t.level||"info",u=Object.create(r);u.log||(u.log=ie),Object.defineProperty(u,"levelVal",{get:d}),Object.defineProperty(u,"level",{get:y,set:m});const p={transmit:e,serialize:o,asObject:t.browser.asObject,levels:a,timestamp:ss(t)};u.levels=gt.levels,u.level=h,u.setMaxListeners=u.getMaxListeners=u.emit=u.addListener=u.on=u.prependListener=u.once=u.prependOnceListener=u.removeListener=u.removeAllListeners=u.listeners=u.listenerCount=u.eventNames=u.write=u.flush=ie,u.serializers=n,u._serialize=o,u._stdErrSerialize=i,u.child=v,e&&(u._logEvent=ar());function d(){return this.level==="silent"?1/0:this.levels.values[this.level]}function y(){return this._level}function m(g){if(g!=="silent"&&!this.levels.values[g])throw Error("unknown level "+g);this._level=g,Ht(p,u,"error","log"),Ht(p,u,"fatal","error"),Ht(p,u,"warn","error"),Ht(p,u,"info","log"),Ht(p,u,"debug","log"),Ht(p,u,"trace","log")}function v(g,_){if(!g)throw new Error("missing bindings for child Pino");_=_||{},o&&g.serializers&&(_.serializers=g.serializers);const C=_.serializers;if(o&&C){var U=Object.assign({},n,C),z=t.browser.serialize===!0?Object.keys(U):o;delete g.serializers,Ue([g],z,U,this._stdErrSerialize)}function E(P){this._childLevel=(P._childLevel|0)+1,this.error=qt(P,g,"error"),this.fatal=qt(P,g,"fatal"),this.warn=qt(P,g,"warn"),this.info=qt(P,g,"info"),this.debug=qt(P,g,"debug"),this.trace=qt(P,g,"trace"),U&&(this.serializers=U,this._serialize=z),e&&(this._logEvent=ar([].concat(P._logEvent.bindings,g)))}return E.prototype=this,new E(this)}return u}gt.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};gt.stdSerializers=ts;gt.stdTimeFunctions=Object.assign({},{nullTime:In,epochTime:Cn,unixTime:as,isoTime:us});function Ht(t,e,r,n){const o=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?ie:o[r]?o[r]:oe[r]||oe[n]||ie,rs(t,e,r)}function rs(t,e,r){!t.transmit&&e[r]===ie||(e[r]=function(n){return function(){const o=t.timestamp(),i=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===oe?oe:this;for(var h=0;h<i.length;h++)i[h]=arguments[h];if(t.serialize&&!t.asObject&&Ue(i,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?n.call(a,ns(this,r,i,o)):n.apply(a,i),t.transmit){const u=t.transmit.level||e.level,p=gt.levels.values[u],d=gt.levels.values[r];if(d<p)return;os(this,{ts:o,methodLevel:r,methodValue:d,transmitValue:gt.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},i)}}}(e[r]))}function ns(t,e,r,n){t._serialize&&Ue(r,t._serialize,t.serializers,t._stdErrSerialize);const o=r.slice();let i=o[0];const a={};n&&(a.time=n),a.level=gt.levels.values[e];let h=(t._childLevel|0)+1;if(h<1&&(h=1),i!==null&&typeof i=="object"){for(;h--&&typeof o[0]=="object";)Object.assign(a,o.shift());i=o.length?Zr(o.shift(),o):void 0}else typeof i=="string"&&(i=Zr(o.shift(),o));return i!==void 0&&(a.msg=i),a}function Ue(t,e,r,n){for(const o in t)if(n&&t[o]instanceof Error)t[o]=gt.stdSerializers.err(t[o]);else if(typeof t[o]=="object"&&!Array.isArray(t[o]))for(const i in t[o])e&&e.indexOf(i)>-1&&i in r&&(t[o][i]=r[i](t[o][i]))}function qt(t,e,r){return function(){const n=new Array(1+arguments.length);n[0]=e;for(var o=1;o<n.length;o++)n[o]=arguments[o-1];return t[r].apply(this,n)}}function os(t,e,r){const n=e.send,o=e.ts,i=e.methodLevel,a=e.methodValue,h=e.val,u=t._logEvent.bindings;Ue(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=o,t._logEvent.messages=r.filter(function(p){return u.indexOf(p)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=a,n(i,t._logEvent,h),t._logEvent=ar(u)}function ar(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function is(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const r in t)e[r]===void 0&&(e[r]=t[r]);return e}function ss(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?In:Cn}function Oe(){return{}}function Je(t){return t}function ie(){}function In(){return!1}function Cn(){return Date.now()}function as(){return Math.round(Date.now()/1e3)}function us(){return new Date(Date.now()).toISOString()}function cs(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const zn=yr(Vt),fs={level:"info"},ue="custom_context",gr=1e3*1024;let ls=class{constructor(t){this.nodeValue=t,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},Yr=class{constructor(t){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=t,this.sizeInBytes=0}append(t){const e=new ls(t);if(e.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${t} with size ${e.size}`);for(;this.size+e.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=e),this.tail=e):(this.head=e,this.tail=e),this.lengthInNodes++,this.sizeInBytes+=e.size}shift(){if(!this.head)return;const t=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=t.size}toArray(){const t=[];let e=this.head;for(;e!==null;)t.push(e.value),e=e.next;return t}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let t=this.head;return{next:()=>{if(!t)return{done:!0,value:null};const e=t.value;return t=t.next,{done:!1,value:e}}}}},Un=class{constructor(t,e=gr){this.level=t??"error",this.levelValue=Vt.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=e,this.logs=new Yr(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(t,e){e===Vt.levels.values.error?console.error(t):e===Vt.levels.values.warn?console.warn(t):e===Vt.levels.values.debug?console.debug(t):e===Vt.levels.values.trace?console.trace(t):console.log(t)}appendToLogs(t){this.logs.append(ne({timestamp:new Date().toISOString(),log:t}));const e=typeof t=="string"?JSON.parse(t).level:t.level;e>=this.levelValue&&this.forwardToConsole(t,e)}getLogs(){return this.logs}clearLogs(){this.logs=new Yr(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(t){const e=this.getLogArray();return e.push(ne({extraMetadata:t})),new Blob(e,{type:"application/json"})}};class hs{constructor(e,r=gr){this.baseChunkLogger=new Un(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}}class ds{constructor(e,r=gr){this.baseChunkLogger=new Un(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var ps=Object.defineProperty,bs=Object.defineProperties,ys=Object.getOwnPropertyDescriptors,Jr=Object.getOwnPropertySymbols,gs=Object.prototype.hasOwnProperty,ws=Object.prototype.propertyIsEnumerable,Xr=(t,e,r)=>e in t?ps(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Le=(t,e)=>{for(var r in e||(e={}))gs.call(e,r)&&Xr(t,r,e[r]);if(Jr)for(var r of Jr(e))ws.call(e,r)&&Xr(t,r,e[r]);return t},Pe=(t,e)=>bs(t,ys(e));function Of(t){return Pe(Le({},t),{level:(t==null?void 0:t.level)||fs.level})}function vs(t,e=ue){return t[e]||""}function ms(t,e,r=ue){return t[r]=e,t}function _s(t,e=ue){let r="";return typeof t.bindings>"u"?r=vs(t,e):r=t.bindings().context||"",r}function xs(t,e,r=ue){const n=_s(t,r);return n.trim()?`${n}/${e}`:e}function Bf(t,e,r=ue){const n=xs(t,e,r),o=t.child({context:n});return ms(o,n,r)}function Es(t){var e,r;const n=new hs((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:zn(Pe(Le({},t.opts),{level:"trace",browser:Pe(Le({},(r=t.opts)==null?void 0:r.browser),{write:o=>n.write(o)})})),chunkLoggerController:n}}function As(t){var e;const r=new ds((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:zn(Pe(Le({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}function Sf(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Es(t):As(t)}function Os(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Rn(t,...e){if(!Os(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Qr(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Bs(t,e){Rn(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const $t=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xe=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function Ss(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Mn(t){return typeof t=="string"&&(t=Ss(t)),Rn(t),t}class js{clone(){return this._cloneInto()}}function Ts(t){const e=n=>t().update(Mn(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Nn(t=32){if($t&&typeof $t.getRandomValues=="function")return $t.getRandomValues(new Uint8Array(t));if($t&&typeof $t.randomBytes=="function")return $t.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function Ls(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const o=BigInt(32),i=BigInt(4294967295),a=Number(r>>o&i),h=Number(r&i),u=n?4:0,p=n?0:4;t.setUint32(e+u,a,n),t.setUint32(e+p,h,n)}class Ps extends js{constructor(e,r,n,o){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Xe(this.buffer)}update(e){Qr(this);const{view:r,buffer:n,blockLen:o}=this;e=Mn(e);const i=e.length;for(let a=0;a<i;){const h=Math.min(o-this.pos,i-a);if(h===o){const u=Xe(e);for(;o<=i-a;a+=o)this.process(u,a);continue}n.set(e.subarray(a,a+h),this.pos),this.pos+=h,a+=h,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Qr(this),Bs(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:o,isLE:i}=this;let{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(n,0),a=0);for(let y=a;y<o;y++)r[y]=0;Ls(n,o-8,BigInt(this.length*8),i),this.process(n,0);const h=Xe(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const p=u/4,d=this.get();if(p>d.length)throw new Error("_sha2: outputLen bigger than state");for(let y=0;y<p;y++)h.setUint32(4*y,d[y],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:o,finished:i,destroyed:a,pos:h}=this;return e.length=o,e.pos=h,e.finished=i,e.destroyed=a,o%r&&e.buffer.set(n),e}}const Be=BigInt(2**32-1),ur=BigInt(32);function kn(t,e=!1){return e?{h:Number(t&Be),l:Number(t>>ur&Be)}:{h:Number(t>>ur&Be)|0,l:Number(t&Be)|0}}function Is(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let o=0;o<t.length;o++){const{h:i,l:a}=kn(t[o],e);[r[o],n[o]]=[i,a]}return[r,n]}const Cs=(t,e)=>BigInt(t>>>0)<<ur|BigInt(e>>>0),zs=(t,e,r)=>t>>>r,Us=(t,e,r)=>t<<32-r|e>>>r,Rs=(t,e,r)=>t>>>r|e<<32-r,Ms=(t,e,r)=>t<<32-r|e>>>r,Ns=(t,e,r)=>t<<64-r|e>>>r-32,ks=(t,e,r)=>t>>>r-32|e<<64-r,Ds=(t,e)=>e,Fs=(t,e)=>t,Hs=(t,e,r)=>t<<r|e>>>32-r,qs=(t,e,r)=>e<<r|t>>>32-r,$s=(t,e,r)=>e<<r-32|t>>>64-r,Vs=(t,e,r)=>t<<r-32|e>>>64-r;function Ws(t,e,r,n){const o=(e>>>0)+(n>>>0);return{h:t+r+(o/2**32|0)|0,l:o|0}}const Gs=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Ks=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Zs=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Ys=(t,e,r,n,o)=>e+r+n+o+(t/2**32|0)|0,Js=(t,e,r,n,o)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(o>>>0),Xs=(t,e,r,n,o,i)=>e+r+n+o+i+(t/2**32|0)|0,L={fromBig:kn,split:Is,toBig:Cs,shrSH:zs,shrSL:Us,rotrSH:Rs,rotrSL:Ms,rotrBH:Ns,rotrBL:ks,rotr32H:Ds,rotr32L:Fs,rotlSH:Hs,rotlSL:qs,rotlBH:$s,rotlBL:Vs,add:Ws,add3L:Gs,add3H:Ks,add4L:Zs,add4H:Ys,add5H:Xs,add5L:Js},[Qs,ta]=L.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Lt=new Uint32Array(80),Pt=new Uint32Array(80);class ea extends Ps{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:o,Ch:i,Cl:a,Dh:h,Dl:u,Eh:p,El:d,Fh:y,Fl:m,Gh:v,Gl:g,Hh:_,Hl:C}=this;return[e,r,n,o,i,a,h,u,p,d,y,m,v,g,_,C]}set(e,r,n,o,i,a,h,u,p,d,y,m,v,g,_,C){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=o|0,this.Ch=i|0,this.Cl=a|0,this.Dh=h|0,this.Dl=u|0,this.Eh=p|0,this.El=d|0,this.Fh=y|0,this.Fl=m|0,this.Gh=v|0,this.Gl=g|0,this.Hh=_|0,this.Hl=C|0}process(e,r){for(let E=0;E<16;E++,r+=4)Lt[E]=e.getUint32(r),Pt[E]=e.getUint32(r+=4);for(let E=16;E<80;E++){const P=Lt[E-15]|0,k=Pt[E-15]|0,F=L.rotrSH(P,k,1)^L.rotrSH(P,k,8)^L.shrSH(P,k,7),q=L.rotrSL(P,k,1)^L.rotrSL(P,k,8)^L.shrSL(P,k,7),D=Lt[E-2]|0,M=Pt[E-2]|0,st=L.rotrSH(D,M,19)^L.rotrBH(D,M,61)^L.shrSH(D,M,6),at=L.rotrSL(D,M,19)^L.rotrBL(D,M,61)^L.shrSL(D,M,6),$=L.add4L(q,at,Pt[E-7],Pt[E-16]),wt=L.add4H($,F,st,Lt[E-7],Lt[E-16]);Lt[E]=wt|0,Pt[E]=$|0}let{Ah:n,Al:o,Bh:i,Bl:a,Ch:h,Cl:u,Dh:p,Dl:d,Eh:y,El:m,Fh:v,Fl:g,Gh:_,Gl:C,Hh:U,Hl:z}=this;for(let E=0;E<80;E++){const P=L.rotrSH(y,m,14)^L.rotrSH(y,m,18)^L.rotrBH(y,m,41),k=L.rotrSL(y,m,14)^L.rotrSL(y,m,18)^L.rotrBL(y,m,41),F=y&v^~y&_,q=m&g^~m&C,D=L.add5L(z,k,q,ta[E],Pt[E]),M=L.add5H(D,U,P,F,Qs[E],Lt[E]),st=D|0,at=L.rotrSH(n,o,28)^L.rotrBH(n,o,34)^L.rotrBH(n,o,39),$=L.rotrSL(n,o,28)^L.rotrBL(n,o,34)^L.rotrBL(n,o,39),wt=n&i^n&h^i&h,vt=o&a^o&u^a&u;U=_|0,z=C|0,_=v|0,C=g|0,v=y|0,g=m|0,{h:y,l:m}=L.add(p|0,d|0,M|0,st|0),p=h|0,d=u|0,h=i|0,u=a|0,i=n|0,a=o|0;const c=L.add3L(st,$,vt);n=L.add3H(c,M,at,wt),o=c|0}({h:n,l:o}=L.add(this.Ah|0,this.Al|0,n|0,o|0)),{h:i,l:a}=L.add(this.Bh|0,this.Bl|0,i|0,a|0),{h,l:u}=L.add(this.Ch|0,this.Cl|0,h|0,u|0),{h:p,l:d}=L.add(this.Dh|0,this.Dl|0,p|0,d|0),{h:y,l:m}=L.add(this.Eh|0,this.El|0,y|0,m|0),{h:v,l:g}=L.add(this.Fh|0,this.Fl|0,v|0,g|0),{h:_,l:C}=L.add(this.Gh|0,this.Gl|0,_|0,C|0),{h:U,l:z}=L.add(this.Hh|0,this.Hl|0,U|0,z|0),this.set(n,o,i,a,h,u,p,d,y,m,v,g,_,C,U,z)}roundClean(){Lt.fill(0),Pt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ra=Ts(()=>new ea);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wr=BigInt(0),Dn=BigInt(1),na=BigInt(2);function vr(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function mr(t){if(!vr(t))throw new Error("Uint8Array expected")}function Qe(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const oa=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function _r(t){mr(t);let e="";for(let r=0;r<t.length;r++)e+=oa[t[r]];return e}function Fn(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?wr:BigInt("0x"+t)}const xt={_0:48,_9:57,A:65,F:70,a:97,f:102};function tn(t){if(t>=xt._0&&t<=xt._9)return t-xt._0;if(t>=xt.A&&t<=xt.F)return t-(xt.A-10);if(t>=xt.a&&t<=xt.f)return t-(xt.a-10)}function Hn(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let o=0,i=0;o<r;o++,i+=2){const a=tn(t.charCodeAt(i)),h=tn(t.charCodeAt(i+1));if(a===void 0||h===void 0){const u=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+i)}n[o]=a*16+h}return n}function ia(t){return Fn(_r(t))}function Te(t){return mr(t),Fn(_r(Uint8Array.from(t).reverse()))}function qn(t,e){return Hn(t.toString(16).padStart(e*2,"0"))}function cr(t,e){return qn(t,e).reverse()}function Et(t,e,r){let n;if(typeof e=="string")try{n=Hn(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(vr(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const o=n.length;if(typeof r=="number"&&o!==r)throw new Error(t+" of length "+r+" expected, got "+o);return n}function en(...t){let e=0;for(let n=0;n<t.length;n++){const o=t[n];mr(o),e+=o.length}const r=new Uint8Array(e);for(let n=0,o=0;n<t.length;n++){const i=t[n];r.set(i,o),o+=i.length}return r}const tr=t=>typeof t=="bigint"&&wr<=t;function sa(t,e,r){return tr(t)&&tr(e)&&tr(r)&&e<=t&&t<r}function ee(t,e,r,n){if(!sa(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function aa(t){let e;for(e=0;t>wr;t>>=Dn,e+=1);return e}const ua=t=>(na<<BigInt(t-1))-Dn,ca={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||vr(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function xr(t,e,r={}){const n=(o,i,a)=>{const h=ca[i];if(typeof h!="function")throw new Error("invalid validator function");const u=t[o];if(!(a&&u===void 0)&&!h(u,t))throw new Error("param "+String(o)+" is invalid. Expected "+i+", got "+u)};for(const[o,i]of Object.entries(e))n(o,i,!1);for(const[o,i]of Object.entries(r))n(o,i,!0);return t}function rn(t){const e=new WeakMap;return(r,...n)=>{const o=e.get(r);if(o!==void 0)return o;const i=t(r,...n);return e.set(r,i),i}}const J=BigInt(0),G=BigInt(1),Mt=BigInt(2),fa=BigInt(3),fr=BigInt(4),nn=BigInt(5),on=BigInt(8);function Z(t,e){const r=t%e;return r>=J?r:e+r}function la(t,e,r){if(e<J)throw new Error("invalid exponent, negatives unsupported");if(r<=J)throw new Error("invalid modulus");if(r===G)return J;let n=G;for(;e>J;)e&G&&(n=n*t%r),t=t*t%r,e>>=G;return n}function yt(t,e,r){let n=t;for(;e-- >J;)n*=n,n%=r;return n}function sn(t,e){if(t===J)throw new Error("invert: expected non-zero number");if(e<=J)throw new Error("invert: expected positive modulus, got "+e);let r=Z(t,e),n=e,o=J,i=G;for(;r!==J;){const a=n/r,h=n%r,u=o-i*a;n=r,r=h,o=i,i=u}if(n!==G)throw new Error("invert: does not exist");return Z(o,e)}function ha(t){const e=(t-G)/Mt;let r,n,o;for(r=t-G,n=0;r%Mt===J;r/=Mt,n++);for(o=Mt;o<t&&la(o,e,t)!==t-G;o++)if(o>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const a=(t+G)/fr;return function(h,u){const p=h.pow(u,a);if(!h.eql(h.sqr(p),u))throw new Error("Cannot find square root");return p}}const i=(r+G)/Mt;return function(a,h){if(a.pow(h,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,p=a.pow(a.mul(a.ONE,o),r),d=a.pow(h,i),y=a.pow(h,r);for(;!a.eql(y,a.ONE);){if(a.eql(y,a.ZERO))return a.ZERO;let m=1;for(let g=a.sqr(y);m<u&&!a.eql(g,a.ONE);m++)g=a.sqr(g);const v=a.pow(p,G<<BigInt(u-m-1));p=a.sqr(v),d=a.mul(d,v),y=a.mul(y,p),u=m}return d}}function da(t){if(t%fr===fa){const e=(t+G)/fr;return function(r,n){const o=r.pow(n,e);if(!r.eql(r.sqr(o),n))throw new Error("Cannot find square root");return o}}if(t%on===nn){const e=(t-nn)/on;return function(r,n){const o=r.mul(n,Mt),i=r.pow(o,e),a=r.mul(n,i),h=r.mul(r.mul(a,Mt),i),u=r.mul(a,r.sub(h,r.ONE));if(!r.eql(r.sqr(u),n))throw new Error("Cannot find square root");return u}}return ha(t)}const pa=(t,e)=>(Z(t,e)&G)===G,ba=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ya(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=ba.reduce((n,o)=>(n[o]="function",n),e);return xr(t,r)}function ga(t,e,r){if(r<J)throw new Error("invalid exponent, negatives unsupported");if(r===J)return t.ONE;if(r===G)return e;let n=t.ONE,o=e;for(;r>J;)r&G&&(n=t.mul(n,o)),o=t.sqr(o),r>>=G;return n}function wa(t,e){const r=new Array(e.length),n=e.reduce((i,a,h)=>t.is0(a)?i:(r[h]=i,t.mul(i,a)),t.ONE),o=t.inv(n);return e.reduceRight((i,a,h)=>t.is0(a)?i:(r[h]=t.mul(i,r[h]),t.mul(i,a)),o),r}function $n(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Vn(t,e,r=!1,n={}){if(t<=J)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:o,nByteLength:i}=$n(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let a;const h=Object.freeze({ORDER:t,isLE:r,BITS:o,BYTES:i,MASK:ua(o),ZERO:J,ONE:G,create:u=>Z(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return J<=u&&u<t},is0:u=>u===J,isOdd:u=>(u&G)===G,neg:u=>Z(-u,t),eql:(u,p)=>u===p,sqr:u=>Z(u*u,t),add:(u,p)=>Z(u+p,t),sub:(u,p)=>Z(u-p,t),mul:(u,p)=>Z(u*p,t),pow:(u,p)=>ga(h,u,p),div:(u,p)=>Z(u*sn(p,t),t),sqrN:u=>u*u,addN:(u,p)=>u+p,subN:(u,p)=>u-p,mulN:(u,p)=>u*p,inv:u=>sn(u,t),sqrt:n.sqrt||(u=>(a||(a=da(t)),a(h,u))),invertBatch:u=>wa(h,u),cmov:(u,p,d)=>d?p:u,toBytes:u=>r?cr(u,i):qn(u,i),fromBytes:u=>{if(u.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+u.length);return r?Te(u):ia(u)}});return Object.freeze(h)}const an=BigInt(0),Se=BigInt(1);function er(t,e){const r=e.negate();return t?r:e}function Wn(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function rr(t,e){Wn(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function va(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function ma(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const nr=new WeakMap,Gn=new WeakMap;function or(t){return Gn.get(t)||1}function _a(t,e){return{constTimeNegate:er,hasPrecomputes(r){return or(r)!==1},unsafeLadder(r,n,o=t.ZERO){let i=r;for(;n>an;)n&Se&&(o=o.add(i)),i=i.double(),n>>=Se;return o},precomputeWindow(r,n){const{windows:o,windowSize:i}=rr(n,e),a=[];let h=r,u=h;for(let p=0;p<o;p++){u=h,a.push(u);for(let d=1;d<i;d++)u=u.add(h),a.push(u);h=u.double()}return a},wNAF(r,n,o){const{windows:i,windowSize:a}=rr(r,e);let h=t.ZERO,u=t.BASE;const p=BigInt(2**r-1),d=2**r,y=BigInt(r);for(let m=0;m<i;m++){const v=m*a;let g=Number(o&p);o>>=y,g>a&&(g-=d,o+=Se);const _=v,C=v+Math.abs(g)-1,U=m%2!==0,z=g<0;g===0?u=u.add(er(U,n[_])):h=h.add(er(z,n[C]))}return{p:h,f:u}},wNAFUnsafe(r,n,o,i=t.ZERO){const{windows:a,windowSize:h}=rr(r,e),u=BigInt(2**r-1),p=2**r,d=BigInt(r);for(let y=0;y<a;y++){const m=y*h;if(o===an)break;let v=Number(o&u);if(o>>=d,v>h&&(v-=p,o+=Se),v===0)continue;let g=n[m+Math.abs(v)-1];v<0&&(g=g.negate()),i=i.add(g)}return i},getPrecomputes(r,n,o){let i=nr.get(n);return i||(i=this.precomputeWindow(n,r),r!==1&&nr.set(n,o(i))),i},wNAFCached(r,n,o){const i=or(r);return this.wNAF(i,this.getPrecomputes(i,r,o),n)},wNAFCachedUnsafe(r,n,o,i){const a=or(r);return a===1?this.unsafeLadder(r,n,i):this.wNAFUnsafe(a,this.getPrecomputes(a,r,o),n,i)},setWindowSize(r,n){Wn(n,e),Gn.set(r,n),nr.delete(r)}}}function xa(t,e,r,n){if(va(r,t),ma(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,i=aa(BigInt(r.length)),a=i>12?i-3:i>4?i-2:i?2:1,h=(1<<a)-1,u=new Array(h+1).fill(o),p=Math.floor((e.BITS-1)/a)*a;let d=o;for(let y=p;y>=0;y-=a){u.fill(o);for(let v=0;v<n.length;v++){const g=n[v],_=Number(g>>BigInt(y)&BigInt(h));u[_]=u[_].add(r[v])}let m=o;for(let v=u.length-1,g=o;v>0;v--)g=g.add(u[v]),m=m.add(g);if(d=d.add(m),y!==0)for(let v=0;v<a;v++)d=d.double()}return d}function Ea(t){return ya(t.Fp),xr(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...$n(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const pt=BigInt(0),nt=BigInt(1),je=BigInt(2),Aa=BigInt(8),Oa={zip215:!0};function Ba(t){const e=Ea(t);return xr(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Sa(t){const e=Ba(t),{Fp:r,n,prehash:o,hash:i,randomBytes:a,nByteLength:h,h:u}=e,p=je<<BigInt(h*8)-nt,d=r.create,y=Vn(e.n,e.nBitLength),m=e.uvRatio||((c,l)=>{try{return{isValid:!0,value:r.sqrt(c*r.inv(l))}}catch{return{isValid:!1,value:pt}}}),v=e.adjustScalarBytes||(c=>c),g=e.domain||((c,l,w)=>{if(Qe("phflag",w),l.length||w)throw new Error("Contexts/pre-hash are not supported");return c});function _(c,l){ee("coordinate "+c,l,pt,p)}function C(c){if(!(c instanceof E))throw new Error("ExtendedPoint expected")}const U=rn((c,l)=>{const{ex:w,ey:x,ez:B}=c,A=c.is0();l==null&&(l=A?Aa:r.inv(B));const I=d(w*l),N=d(x*l),R=d(B*l);if(A)return{x:pt,y:nt};if(R!==nt)throw new Error("invZ was invalid");return{x:I,y:N}}),z=rn(c=>{const{a:l,d:w}=e;if(c.is0())throw new Error("bad point: ZERO");const{ex:x,ey:B,ez:A,et:I}=c,N=d(x*x),R=d(B*B),j=d(A*A),S=d(j*j),X=d(N*l),lt=d(j*d(X+R)),K=d(S+d(w*d(N*R)));if(lt!==K)throw new Error("bad point: equation left != right (1)");const rt=d(x*B),ht=d(A*I);if(rt!==ht)throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(l,w,x,B){this.ex=l,this.ey=w,this.ez=x,this.et=B,_("x",l),_("y",w),_("z",x),_("t",B),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(l){if(l instanceof E)throw new Error("extended point not allowed");const{x:w,y:x}=l||{};return _("x",w),_("y",x),new E(w,x,nt,d(w*x))}static normalizeZ(l){const w=r.invertBatch(l.map(x=>x.ez));return l.map((x,B)=>x.toAffine(w[B])).map(E.fromAffine)}static msm(l,w){return xa(E,y,l,w)}_setWindowSize(l){F.setWindowSize(this,l)}assertValidity(){z(this)}equals(l){C(l);const{ex:w,ey:x,ez:B}=this,{ex:A,ey:I,ez:N}=l,R=d(w*N),j=d(A*B),S=d(x*N),X=d(I*B);return R===j&&S===X}is0(){return this.equals(E.ZERO)}negate(){return new E(d(-this.ex),this.ey,this.ez,d(-this.et))}double(){const{a:l}=e,{ex:w,ey:x,ez:B}=this,A=d(w*w),I=d(x*x),N=d(je*d(B*B)),R=d(l*A),j=w+x,S=d(d(j*j)-A-I),X=R+I,lt=X-N,K=R-I,rt=d(S*lt),ht=d(X*K),bt=d(S*K),Bt=d(lt*X);return new E(rt,ht,Bt,bt)}add(l){C(l);const{a:w,d:x}=e,{ex:B,ey:A,ez:I,et:N}=this,{ex:R,ey:j,ez:S,et:X}=l;if(w===BigInt(-1)){const fe=d((A-B)*(j+R)),le=d((A+B)*(j-R)),Zt=d(le-fe);if(Zt===pt)return this.double();const he=d(I*je*X),de=d(N*je*S),pe=de+he,be=le+fe,ye=de-he,Dt=d(pe*Zt),Yt=d(be*ye),ge=d(pe*ye),ut=d(Zt*be);return new E(Dt,Yt,ut,ge)}const lt=d(B*R),K=d(A*j),rt=d(N*x*X),ht=d(I*S),bt=d((B+A)*(R+j)-lt-K),Bt=ht-rt,Gt=ht+rt,Kt=d(K-w*lt),ke=d(bt*Bt),De=d(Gt*Kt),Fe=d(bt*Kt),He=d(Bt*Gt);return new E(ke,De,He,Fe)}subtract(l){return this.add(l.negate())}wNAF(l){return F.wNAFCached(this,l,E.normalizeZ)}multiply(l){const w=l;ee("scalar",w,nt,n);const{p:x,f:B}=this.wNAF(w);return E.normalizeZ([x,B])[0]}multiplyUnsafe(l,w=E.ZERO){const x=l;return ee("scalar",x,pt,n),x===pt?k:this.is0()||x===nt?this:F.wNAFCachedUnsafe(this,x,E.normalizeZ,w)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return F.unsafeLadder(this,n).is0()}toAffine(l){return U(this,l)}clearCofactor(){const{h:l}=e;return l===nt?this:this.multiplyUnsafe(l)}static fromHex(l,w=!1){const{d:x,a:B}=e,A=r.BYTES;l=Et("pointHex",l,A),Qe("zip215",w);const I=l.slice(),N=l[A-1];I[A-1]=N&-129;const R=Te(I),j=w?p:r.ORDER;ee("pointHex.y",R,pt,j);const S=d(R*R),X=d(S-nt),lt=d(x*S-B);let{isValid:K,value:rt}=m(X,lt);if(!K)throw new Error("Point.fromHex: invalid y coordinate");const ht=(rt&nt)===nt,bt=(N&128)!==0;if(!w&&rt===pt&&bt)throw new Error("Point.fromHex: x=0 and x_0=1");return bt!==ht&&(rt=d(-rt)),E.fromAffine({x:rt,y:R})}static fromPrivateKey(l){return M(l).point}toRawBytes(){const{x:l,y:w}=this.toAffine(),x=cr(w,r.BYTES);return x[x.length-1]|=l&nt?128:0,x}toHex(){return _r(this.toRawBytes())}}E.BASE=new E(e.Gx,e.Gy,nt,d(e.Gx*e.Gy)),E.ZERO=new E(pt,nt,nt,pt);const{BASE:P,ZERO:k}=E,F=_a(E,h*8);function q(c){return Z(c,n)}function D(c){return q(Te(c))}function M(c){const l=r.BYTES;c=Et("private key",c,l);const w=Et("hashed private key",i(c),2*l),x=v(w.slice(0,l)),B=w.slice(l,2*l),A=D(x),I=P.multiply(A),N=I.toRawBytes();return{head:x,prefix:B,scalar:A,point:I,pointBytes:N}}function st(c){return M(c).pointBytes}function at(c=new Uint8Array,...l){const w=en(...l);return D(i(g(w,Et("context",c),!!o)))}function $(c,l,w={}){c=Et("message",c),o&&(c=o(c));const{prefix:x,scalar:B,pointBytes:A}=M(l),I=at(w.context,x,c),N=P.multiply(I).toRawBytes(),R=at(w.context,N,A,c),j=q(I+R*B);ee("signature.s",j,pt,n);const S=en(N,cr(j,r.BYTES));return Et("result",S,r.BYTES*2)}const wt=Oa;function vt(c,l,w,x=wt){const{context:B,zip215:A}=x,I=r.BYTES;c=Et("signature",c,2*I),l=Et("message",l),w=Et("publicKey",w,I),A!==void 0&&Qe("zip215",A),o&&(l=o(l));const N=Te(c.slice(I,2*I));let R,j,S;try{R=E.fromHex(w,A),j=E.fromHex(c.slice(0,I),A),S=P.multiplyUnsafe(N)}catch{return!1}if(!A&&R.isSmallOrder())return!1;const X=at(B,j.toRawBytes(),R.toRawBytes(),l);return j.add(R.multiplyUnsafe(X)).subtract(S).clearCofactor().equals(E.ZERO)}return P._setWindowSize(8),{CURVE:e,getPublicKey:st,sign:$,verify:vt,ExtendedPoint:E,utils:{getExtendedPublicKey:M,randomPrivateKey:()=>a(r.BYTES),precompute(c=8,l=E.BASE){return l._setWindowSize(c),l.multiply(BigInt(3)),l}}}}BigInt(0),BigInt(1);const Er=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),un=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const ja=BigInt(1),cn=BigInt(2);BigInt(3);const Ta=BigInt(5),La=BigInt(8);function Pa(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),o=BigInt(80),i=Er,a=t*t%i*t%i,h=yt(a,cn,i)*a%i,u=yt(h,ja,i)*t%i,p=yt(u,Ta,i)*u%i,d=yt(p,e,i)*p%i,y=yt(d,r,i)*d%i,m=yt(y,n,i)*y%i,v=yt(m,o,i)*m%i,g=yt(v,o,i)*m%i,_=yt(g,e,i)*p%i;return{pow_p_5_8:yt(_,cn,i)*t%i,b2:a}}function Ia(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Ca(t,e){const r=Er,n=Z(e*e*e,r),o=Z(n*n*e,r),i=Pa(t*o).pow_p_5_8;let a=Z(t*n*i,r);const h=Z(e*a*a,r),u=a,p=Z(a*un,r),d=h===t,y=h===Z(-t,r),m=h===Z(-t*un,r);return d&&(a=u),(y||m)&&(a=p),pa(a,r)&&(a=Z(-a,r)),{isValid:d||y,value:a}}const za=Vn(Er,void 0,!0),Ua={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:za,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:La,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:ra,randomBytes:Nn,adjustScalarBytes:Ia,uvRatio:Ca},Kn=Sa(Ua),Ra="EdDSA",Ma="JWT",Ie=".",Re="base64url",Zn="utf8",Yn="utf8",Na=":",ka="did",Da="key",fn="base58btc",Fa="z",Ha="K36",qa=32;function Ar(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Jn(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Ar(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Xn(t,e){e||(e=t.reduce((o,i)=>o+i.length,0));const r=Jn(e);let n=0;for(const o of t)r.set(o,n),n+=o.length;return Ar(r)}function $a(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<t.length;o++){var i=t.charAt(o),a=i.charCodeAt(0);if(r[a]!==255)throw new TypeError(i+" is ambiguous");r[a]=o}var h=t.length,u=t.charAt(0),p=Math.log(h)/Math.log(256),d=Math.log(256)/Math.log(h);function y(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var _=0,C=0,U=0,z=g.length;U!==z&&g[U]===0;)U++,_++;for(var E=(z-U)*d+1>>>0,P=new Uint8Array(E);U!==z;){for(var k=g[U],F=0,q=E-1;(k!==0||F<C)&&q!==-1;q--,F++)k+=256*P[q]>>>0,P[q]=k%h>>>0,k=k/h>>>0;if(k!==0)throw new Error("Non-zero carry");C=F,U++}for(var D=E-C;D!==E&&P[D]===0;)D++;for(var M=u.repeat(_);D<E;++D)M+=t.charAt(P[D]);return M}function m(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var _=0;if(g[_]!==" "){for(var C=0,U=0;g[_]===u;)C++,_++;for(var z=(g.length-_)*p+1>>>0,E=new Uint8Array(z);g[_];){var P=r[g.charCodeAt(_)];if(P===255)return;for(var k=0,F=z-1;(P!==0||k<U)&&F!==-1;F--,k++)P+=h*E[F]>>>0,E[F]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");U=k,_++}if(g[_]!==" "){for(var q=z-U;q!==z&&E[q]===0;)q++;for(var D=new Uint8Array(C+(z-q)),M=C;q!==z;)D[M++]=E[q++];return D}}}function v(g){var _=m(g);if(_)return _;throw new Error(`Non-${e} character`)}return{encode:y,decodeUnsafe:m,decode:v}}var Va=$a,Wa=Va;const Qn=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Ga=t=>new TextEncoder().encode(t),Ka=t=>new TextDecoder().decode(t);class Za{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Ya{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return to(this,e)}}class Ja{constructor(e){this.decoders=e}or(e){return to(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const to=(t,e)=>new Ja({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Xa{constructor(e,r,n,o){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Za(e,r,n),this.decoder=new Ya(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Me=({name:t,prefix:e,encode:r,decode:n})=>new Xa(t,e,r,n),ce=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:o}=Wa(r,e);return Me({prefix:t,name:e,encode:n,decode:i=>Qn(o(i))})},Qa=(t,e,r,n)=>{const o={};for(let d=0;d<e.length;++d)o[e[d]]=d;let i=t.length;for(;t[i-1]==="=";)--i;const a=new Uint8Array(i*r/8|0);let h=0,u=0,p=0;for(let d=0;d<i;++d){const y=o[t[d]];if(y===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|y,h+=r,h>=8&&(h-=8,a[p++]=255&u>>h)}if(h>=r||255&u<<8-h)throw new SyntaxError("Unexpected end of data");return a},tu=(t,e,r)=>{const n=e[e.length-1]==="=",o=(1<<r)-1;let i="",a=0,h=0;for(let u=0;u<t.length;++u)for(h=h<<8|t[u],a+=8;a>r;)a-=r,i+=e[o&h>>a];if(a&&(i+=e[o&h<<r-a]),n)for(;i.length*r&7;)i+="=";return i},tt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Me({prefix:e,name:t,encode(o){return tu(o,n,r)},decode(o){return Qa(o,n,r,t)}}),eu=Me({prefix:"\0",name:"identity",encode:t=>Ka(t),decode:t=>Ga(t)});var ru=Object.freeze({__proto__:null,identity:eu});const nu=tt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ou=Object.freeze({__proto__:null,base2:nu});const iu=tt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var su=Object.freeze({__proto__:null,base8:iu});const au=ce({prefix:"9",name:"base10",alphabet:"0123456789"});var uu=Object.freeze({__proto__:null,base10:au});const cu=tt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),fu=tt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var lu=Object.freeze({__proto__:null,base16:cu,base16upper:fu});const hu=tt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),du=tt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),pu=tt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),bu=tt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),yu=tt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),gu=tt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),wu=tt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),vu=tt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),mu=tt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var _u=Object.freeze({__proto__:null,base32:hu,base32upper:du,base32pad:pu,base32padupper:bu,base32hex:yu,base32hexupper:gu,base32hexpad:wu,base32hexpadupper:vu,base32z:mu});const xu=ce({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Eu=ce({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Au=Object.freeze({__proto__:null,base36:xu,base36upper:Eu});const Ou=ce({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Bu=ce({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Su=Object.freeze({__proto__:null,base58btc:Ou,base58flickr:Bu});const ju=tt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Tu=tt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Lu=tt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Pu=tt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Iu=Object.freeze({__proto__:null,base64:ju,base64pad:Tu,base64url:Lu,base64urlpad:Pu});const eo=Array.from(""),Cu=eo.reduce((t,e,r)=>(t[r]=e,t),[]),zu=eo.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Uu(t){return t.reduce((e,r)=>(e+=Cu[r],e),"")}function Ru(t){const e=[];for(const r of t){const n=zu[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Mu=Me({prefix:"",name:"base256emoji",encode:Uu,decode:Ru});var Nu=Object.freeze({__proto__:null,base256emoji:Mu}),ku=ro,ln=128,Du=-128,Fu=Math.pow(2,31);function ro(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Fu;)e[r++]=t&255|ln,t/=128;for(;t&Du;)e[r++]=t&255|ln,t>>>=7;return e[r]=t|0,ro.bytes=r-n+1,e}var Hu=lr,qu=128,hn=127;function lr(t,n){var r=0,n=n||0,o=0,i=n,a,h=t.length;do{if(i>=h)throw lr.bytes=0,new RangeError("Could not decode varint");a=t[i++],r+=o<28?(a&hn)<<o:(a&hn)*Math.pow(2,o),o+=7}while(a>=qu);return lr.bytes=i-n,r}var $u=Math.pow(2,7),Vu=Math.pow(2,14),Wu=Math.pow(2,21),Gu=Math.pow(2,28),Ku=Math.pow(2,35),Zu=Math.pow(2,42),Yu=Math.pow(2,49),Ju=Math.pow(2,56),Xu=Math.pow(2,63),Qu=function(t){return t<$u?1:t<Vu?2:t<Wu?3:t<Gu?4:t<Ku?5:t<Zu?6:t<Yu?7:t<Ju?8:t<Xu?9:10},tc={encode:ku,decode:Hu,encodingLength:Qu},no=tc;const dn=(t,e,r=0)=>(no.encode(t,e,r),e),pn=t=>no.encodingLength(t),hr=(t,e)=>{const r=e.byteLength,n=pn(t),o=n+pn(r),i=new Uint8Array(o+r);return dn(t,i,0),dn(r,i,n),i.set(e,o),new ec(t,r,e,i)};class ec{constructor(e,r,n,o){this.code=e,this.size=r,this.digest=n,this.bytes=o}}const oo=({name:t,code:e,encode:r})=>new rc(t,e,r);class rc{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?hr(this.code,r):r.then(n=>hr(this.code,n))}else throw Error("Unknown type, must be binary type")}}const io=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),nc=oo({name:"sha2-256",code:18,encode:io("SHA-256")}),oc=oo({name:"sha2-512",code:19,encode:io("SHA-512")});var ic=Object.freeze({__proto__:null,sha256:nc,sha512:oc});const so=0,sc="identity",ao=Qn,ac=t=>hr(so,ao(t)),uc={code:so,name:sc,encode:ao,digest:ac};var cc=Object.freeze({__proto__:null,identity:uc});new TextEncoder,new TextDecoder;const bn={...ru,...ou,...su,...uu,...lu,..._u,...Au,...Su,...Iu,...Nu};({...ic,...cc});function uo(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const yn=uo("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ir=uo("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Jn(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),co={utf8:yn,"utf-8":yn,hex:bn.base16,latin1:ir,ascii:ir,binary:ir,...bn};function Ne(t,e="utf8"){const r=co[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Wt(t,e="utf8"){const r=co[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ar(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function gn(t){return Pn(Ne(Wt(t,Re),Zn))}function Ce(t){return Ne(Wt(ne(t),Zn),Re)}function fc(t){const e=Wt(Ha,fn),r=Fa+Ne(Xn([e,t]),fn);return[ka,Da,r].join(Na)}function lc(t){return Ne(t,Re)}function hc(t){return Wt(t,Re)}function dc(t){return Wt([Ce(t.header),Ce(t.payload)].join(Ie),Yn)}function pc(t){return[Ce(t.header),Ce(t.payload),lc(t.signature)].join(Ie)}function jf(t){const e=t.split(Ie),r=gn(e[0]),n=gn(e[1]),o=hc(e[2]),i=Wt(e.slice(0,2).join(Ie),Yn);return{header:r,payload:n,signature:o,data:i}}function Tf(t=Nn(qa)){const e=Kn.getPublicKey(t);return{secretKey:Xn([t,e]),publicKey:e}}async function Lf(t,e,r,n,o=Oi.fromMiliseconds(Date.now())){const i={alg:Ra,typ:Ma},a=fc(n.publicKey),h=o+r,u={iss:a,sub:t,aud:e,iat:o,exp:h},p=dc({header:i,payload:u}),d=Kn.sign(p,n.secretKey.slice(0,32));return pc({header:i,payload:u,signature:d})}const bc="PARSE_ERROR",yc="INVALID_REQUEST",gc="METHOD_NOT_FOUND",wc="INVALID_PARAMS",fo="INTERNAL_ERROR",Or="SERVER_ERROR",vc=[-32700,-32600,-32601,-32602,-32603],re={[bc]:{code:-32700,message:"Parse error"},[yc]:{code:-32600,message:"Invalid Request"},[gc]:{code:-32601,message:"Method not found"},[wc]:{code:-32602,message:"Invalid params"},[fo]:{code:-32603,message:"Internal error"},[Or]:{code:-32e3,message:"Server error"}},lo=Or;function mc(t){return vc.includes(t)}function wn(t){return Object.keys(re).includes(t)?re[t]:re[lo]}function _c(t){return Object.values(re).find(r=>r.code===t)||re[lo]}function xc(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var Ec={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var dr=function(t,e){return dr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},dr(t,e)};function Ac(t,e){dr(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var pr=function(){return pr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},pr.apply(this,arguments)};function Oc(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]]);return r}function Bc(t,e,r,n){var o=arguments.length,i=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var h=t.length-1;h>=0;h--)(a=t[h])&&(i=(o<3?a(i):o>3?a(e,r,i):a(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i}function Sc(t,e){return function(r,n){e(r,n,t)}}function jc(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Tc(t,e,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function h(d){try{p(n.next(d))}catch(y){a(y)}}function u(d){try{p(n.throw(d))}catch(y){a(y)}}function p(d){d.done?i(d.value):o(d.value).then(h,u)}p((n=n.apply(t,e||[])).next())})}function Lc(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function h(p){return function(d){return u([p,d])}}function u(p){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=p[0]&2?o.return:p[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,p[1])).done)return i;switch(o=0,i&&(p=[p[0]&2,i.value]),p[0]){case 0:case 1:i=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,o=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!i||p[1]>i[0]&&p[1]<i[3])){r.label=p[1];break}if(p[0]===6&&r.label<i[1]){r.label=i[1],i=p;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(p);break}i[2]&&r.ops.pop(),r.trys.pop();continue}p=e.call(t,r)}catch(d){p=[6,d],o=0}finally{n=i=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function Pc(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function Ic(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function br(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ho(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(h){a={error:h}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function Cc(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ho(arguments[e]));return t}function zc(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),o=0,e=0;e<r;e++)for(var i=arguments[e],a=0,h=i.length;a<h;a++,o++)n[o]=i[a];return n}function se(t){return this instanceof se?(this.v=t,this):new se(t)}function Uc(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),o,i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(m){n[m]&&(o[m]=function(v){return new Promise(function(g,_){i.push([m,v,g,_])>1||h(m,v)})})}function h(m,v){try{u(n[m](v))}catch(g){y(i[0][3],g)}}function u(m){m.value instanceof se?Promise.resolve(m.value.v).then(p,d):y(i[0][2],m)}function p(m){h("next",m)}function d(m){h("throw",m)}function y(m,v){m(v),i.shift(),i.length&&h(i[0][0],i[0][1])}}function Rc(t){var e,r;return e={},n("next"),n("throw",function(o){throw o}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(o,i){e[o]=t[o]?function(a){return(r=!r)?{value:se(t[o](a)),done:o==="return"}:i?i(a):a}:i}}function Mc(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof br=="function"?br(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(a){return new Promise(function(h,u){a=t[i](a),o(h,u,a.done,a.value)})}}function o(i,a,h,u){Promise.resolve(u).then(function(p){i({value:p,done:h})},a)}}function Nc(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function kc(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Dc(t){return t&&t.__esModule?t:{default:t}}function Fc(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Hc(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const qc=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return pr},__asyncDelegator:Rc,__asyncGenerator:Uc,__asyncValues:Mc,__await:se,__awaiter:Tc,__classPrivateFieldGet:Fc,__classPrivateFieldSet:Hc,__createBinding:Pc,__decorate:Bc,__exportStar:Ic,__extends:Ac,__generator:Lc,__importDefault:Dc,__importStar:kc,__makeTemplateObject:Nc,__metadata:jc,__param:Sc,__read:ho,__rest:Oc,__spread:Cc,__spreadArrays:zc,__values:br},Symbol.toStringTag,{value:"Module"})),$c=Bi(qc);var At={},vn;function Vc(){if(vn)return At;vn=1,Object.defineProperty(At,"__esModule",{value:!0}),At.isBrowserCryptoAvailable=At.getSubtleCrypto=At.getBrowerCrypto=void 0;function t(){return(ot===null||ot===void 0?void 0:ot.crypto)||(ot===null||ot===void 0?void 0:ot.msCrypto)||{}}At.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}At.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return At.isBrowserCryptoAvailable=r,At}var Ot={},mn;function Wc(){if(mn)return Ot;mn=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.isBrowser=Ot.isNode=Ot.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Ot.isReactNative=t;function e(){return typeof Nt.process<"u"&&typeof Nt.process.versions<"u"&&typeof Nt.process.versions.node<"u"}Ot.isNode=e;function r(){return!t()&&!e()}return Ot.isBrowser=r,Ot}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=$c;e.__exportStar(Vc(),t),e.__exportStar(Wc(),t)})(Ec);function po(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function Pf(t=6){return BigInt(po(t))}function If(t,e,r){return{id:r||po(),jsonrpc:"2.0",method:t,params:e}}function Cf(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Gc(t,e,r){return{id:t,jsonrpc:"2.0",error:Kc(e)}}function Kc(t,e){return typeof t>"u"?wn(fo):(typeof t=="string"&&(t=Object.assign(Object.assign({},wn(Or)),{message:t})),mc(t.code)&&(t=_c(t.code)),t)}class Zc{}class Yc extends Zc{constructor(){super()}}class zf extends Yc{constructor(e){super()}}const Jc="^https?:",Xc="^wss?:";function Qc(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function bo(t,e){const r=Qc(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function _n(t){return bo(t,Jc)}function Uf(t){return bo(t,Xc)}function Rf(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function yo(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Mf(t){return yo(t)&&"method"in t}function Nf(t){return yo(t)&&(tf(t)||ef(t))}function tf(t){return"result"in t}function ef(t){return"error"in t}var ze={exports:{}};ze.exports;(function(t,e){var r=200,n="__lodash_hash_undefined__",o=1,i=2,a=9007199254740991,h="[object Arguments]",u="[object Array]",p="[object AsyncFunction]",d="[object Boolean]",y="[object Date]",m="[object Error]",v="[object Function]",g="[object GeneratorFunction]",_="[object Map]",C="[object Number]",U="[object Null]",z="[object Object]",E="[object Promise]",P="[object Proxy]",k="[object RegExp]",F="[object Set]",q="[object String]",D="[object Symbol]",M="[object Undefined]",st="[object WeakMap]",at="[object ArrayBuffer]",$="[object DataView]",wt="[object Float32Array]",vt="[object Float64Array]",c="[object Int8Array]",l="[object Int16Array]",w="[object Int32Array]",x="[object Uint8Array]",B="[object Uint8ClampedArray]",A="[object Uint16Array]",I="[object Uint32Array]",N=/[\\^$.*+?()[\]{}|]/g,R=/^\[object .+?Constructor\]$/,j=/^(?:0|[1-9]\d*)$/,S={};S[wt]=S[vt]=S[c]=S[l]=S[w]=S[x]=S[B]=S[A]=S[I]=!0,S[h]=S[u]=S[at]=S[d]=S[$]=S[y]=S[m]=S[v]=S[_]=S[C]=S[z]=S[k]=S[F]=S[q]=S[st]=!1;var X=typeof ot=="object"&&ot&&ot.Object===Object&&ot,lt=typeof self=="object"&&self&&self.Object===Object&&self,K=X||lt||Function("return this")(),rt=e&&!e.nodeType&&e,ht=rt&&!0&&t&&!t.nodeType&&t,bt=ht&&ht.exports===rt,Bt=bt&&X.process,Gt=function(){try{return Bt&&Bt.binding&&Bt.binding("util")}catch{}}(),Kt=Gt&&Gt.isTypedArray;function ke(s,f){for(var b=-1,O=s==null?0:s.length,H=0,T=[];++b<O;){var W=s[b];f(W,b,s)&&(T[H++]=W)}return T}function De(s,f){for(var b=-1,O=f.length,H=s.length;++b<O;)s[H+b]=f[b];return s}function Fe(s,f){for(var b=-1,O=s==null?0:s.length;++b<O;)if(f(s[b],b,s))return!0;return!1}function He(s,f){for(var b=-1,O=Array(s);++b<s;)O[b]=f(b);return O}function fe(s){return function(f){return s(f)}}function le(s,f){return s.has(f)}function Zt(s,f){return s==null?void 0:s[f]}function he(s){var f=-1,b=Array(s.size);return s.forEach(function(O,H){b[++f]=[H,O]}),b}function de(s,f){return function(b){return s(f(b))}}function pe(s){var f=-1,b=Array(s.size);return s.forEach(function(O){b[++f]=O}),b}var be=Array.prototype,ye=Function.prototype,Dt=Object.prototype,Yt=K["__core-js_shared__"],ge=ye.toString,ut=Dt.hasOwnProperty,Br=function(){var s=/[^.]+$/.exec(Yt&&Yt.keys&&Yt.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Sr=Dt.toString,go=RegExp("^"+ge.call(ut).replace(N,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jr=bt?K.Buffer:void 0,we=K.Symbol,Tr=K.Uint8Array,Lr=Dt.propertyIsEnumerable,wo=be.splice,It=we?we.toStringTag:void 0,Pr=Object.getOwnPropertySymbols,vo=jr?jr.isBuffer:void 0,mo=de(Object.keys,Object),qe=Ft(K,"DataView"),Jt=Ft(K,"Map"),$e=Ft(K,"Promise"),Ve=Ft(K,"Set"),We=Ft(K,"WeakMap"),Xt=Ft(Object,"create"),_o=Ut(qe),xo=Ut(Jt),Eo=Ut($e),Ao=Ut(Ve),Oo=Ut(We),Ir=we?we.prototype:void 0,Ge=Ir?Ir.valueOf:void 0;function Ct(s){var f=-1,b=s==null?0:s.length;for(this.clear();++f<b;){var O=s[f];this.set(O[0],O[1])}}function Bo(){this.__data__=Xt?Xt(null):{},this.size=0}function So(s){var f=this.has(s)&&delete this.__data__[s];return this.size-=f?1:0,f}function jo(s){var f=this.__data__;if(Xt){var b=f[s];return b===n?void 0:b}return ut.call(f,s)?f[s]:void 0}function To(s){var f=this.__data__;return Xt?f[s]!==void 0:ut.call(f,s)}function Lo(s,f){var b=this.__data__;return this.size+=this.has(s)?0:1,b[s]=Xt&&f===void 0?n:f,this}Ct.prototype.clear=Bo,Ct.prototype.delete=So,Ct.prototype.get=jo,Ct.prototype.has=To,Ct.prototype.set=Lo;function mt(s){var f=-1,b=s==null?0:s.length;for(this.clear();++f<b;){var O=s[f];this.set(O[0],O[1])}}function Po(){this.__data__=[],this.size=0}function Io(s){var f=this.__data__,b=me(f,s);if(b<0)return!1;var O=f.length-1;return b==O?f.pop():wo.call(f,b,1),--this.size,!0}function Co(s){var f=this.__data__,b=me(f,s);return b<0?void 0:f[b][1]}function zo(s){return me(this.__data__,s)>-1}function Uo(s,f){var b=this.__data__,O=me(b,s);return O<0?(++this.size,b.push([s,f])):b[O][1]=f,this}mt.prototype.clear=Po,mt.prototype.delete=Io,mt.prototype.get=Co,mt.prototype.has=zo,mt.prototype.set=Uo;function zt(s){var f=-1,b=s==null?0:s.length;for(this.clear();++f<b;){var O=s[f];this.set(O[0],O[1])}}function Ro(){this.size=0,this.__data__={hash:new Ct,map:new(Jt||mt),string:new Ct}}function Mo(s){var f=_e(this,s).delete(s);return this.size-=f?1:0,f}function No(s){return _e(this,s).get(s)}function ko(s){return _e(this,s).has(s)}function Do(s,f){var b=_e(this,s),O=b.size;return b.set(s,f),this.size+=b.size==O?0:1,this}zt.prototype.clear=Ro,zt.prototype.delete=Mo,zt.prototype.get=No,zt.prototype.has=ko,zt.prototype.set=Do;function ve(s){var f=-1,b=s==null?0:s.length;for(this.__data__=new zt;++f<b;)this.add(s[f])}function Fo(s){return this.__data__.set(s,n),this}function Ho(s){return this.__data__.has(s)}ve.prototype.add=ve.prototype.push=Fo,ve.prototype.has=Ho;function St(s){var f=this.__data__=new mt(s);this.size=f.size}function qo(){this.__data__=new mt,this.size=0}function $o(s){var f=this.__data__,b=f.delete(s);return this.size=f.size,b}function Vo(s){return this.__data__.get(s)}function Wo(s){return this.__data__.has(s)}function Go(s,f){var b=this.__data__;if(b instanceof mt){var O=b.__data__;if(!Jt||O.length<r-1)return O.push([s,f]),this.size=++b.size,this;b=this.__data__=new zt(O)}return b.set(s,f),this.size=b.size,this}St.prototype.clear=qo,St.prototype.delete=$o,St.prototype.get=Vo,St.prototype.has=Wo,St.prototype.set=Go;function Ko(s,f){var b=xe(s),O=!b&&ci(s),H=!b&&!O&&Ke(s),T=!b&&!O&&!H&&Fr(s),W=b||O||H||T,Y=W?He(s.length,String):[],Q=Y.length;for(var V in s)ut.call(s,V)&&!(W&&(V=="length"||H&&(V=="offset"||V=="parent")||T&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||oi(V,Q)))&&Y.push(V);return Y}function me(s,f){for(var b=s.length;b--;)if(Mr(s[b][0],f))return b;return-1}function Zo(s,f,b){var O=f(s);return xe(s)?O:De(O,b(s))}function Qt(s){return s==null?s===void 0?M:U:It&&It in Object(s)?ri(s):ui(s)}function Cr(s){return te(s)&&Qt(s)==h}function zr(s,f,b,O,H){return s===f?!0:s==null||f==null||!te(s)&&!te(f)?s!==s&&f!==f:Yo(s,f,b,O,zr,H)}function Yo(s,f,b,O,H,T){var W=xe(s),Y=xe(f),Q=W?u:jt(s),V=Y?u:jt(f);Q=Q==h?z:Q,V=V==h?z:V;var it=Q==z,dt=V==z,et=Q==V;if(et&&Ke(s)){if(!Ke(f))return!1;W=!0,it=!1}if(et&&!it)return T||(T=new St),W||Fr(s)?Ur(s,f,b,O,H,T):ti(s,f,Q,b,O,H,T);if(!(b&o)){var ct=it&&ut.call(s,"__wrapped__"),ft=dt&&ut.call(f,"__wrapped__");if(ct||ft){var Tt=ct?s.value():s,_t=ft?f.value():f;return T||(T=new St),H(Tt,_t,b,O,T)}}return et?(T||(T=new St),ei(s,f,b,O,H,T)):!1}function Jo(s){if(!Dr(s)||si(s))return!1;var f=Nr(s)?go:R;return f.test(Ut(s))}function Xo(s){return te(s)&&kr(s.length)&&!!S[Qt(s)]}function Qo(s){if(!ai(s))return mo(s);var f=[];for(var b in Object(s))ut.call(s,b)&&b!="constructor"&&f.push(b);return f}function Ur(s,f,b,O,H,T){var W=b&o,Y=s.length,Q=f.length;if(Y!=Q&&!(W&&Q>Y))return!1;var V=T.get(s);if(V&&T.get(f))return V==f;var it=-1,dt=!0,et=b&i?new ve:void 0;for(T.set(s,f),T.set(f,s);++it<Y;){var ct=s[it],ft=f[it];if(O)var Tt=W?O(ft,ct,it,f,s,T):O(ct,ft,it,s,f,T);if(Tt!==void 0){if(Tt)continue;dt=!1;break}if(et){if(!Fe(f,function(_t,Rt){if(!le(et,Rt)&&(ct===_t||H(ct,_t,b,O,T)))return et.push(Rt)})){dt=!1;break}}else if(!(ct===ft||H(ct,ft,b,O,T))){dt=!1;break}}return T.delete(s),T.delete(f),dt}function ti(s,f,b,O,H,T,W){switch(b){case $:if(s.byteLength!=f.byteLength||s.byteOffset!=f.byteOffset)return!1;s=s.buffer,f=f.buffer;case at:return!(s.byteLength!=f.byteLength||!T(new Tr(s),new Tr(f)));case d:case y:case C:return Mr(+s,+f);case m:return s.name==f.name&&s.message==f.message;case k:case q:return s==f+"";case _:var Y=he;case F:var Q=O&o;if(Y||(Y=pe),s.size!=f.size&&!Q)return!1;var V=W.get(s);if(V)return V==f;O|=i,W.set(s,f);var it=Ur(Y(s),Y(f),O,H,T,W);return W.delete(s),it;case D:if(Ge)return Ge.call(s)==Ge.call(f)}return!1}function ei(s,f,b,O,H,T){var W=b&o,Y=Rr(s),Q=Y.length,V=Rr(f),it=V.length;if(Q!=it&&!W)return!1;for(var dt=Q;dt--;){var et=Y[dt];if(!(W?et in f:ut.call(f,et)))return!1}var ct=T.get(s);if(ct&&T.get(f))return ct==f;var ft=!0;T.set(s,f),T.set(f,s);for(var Tt=W;++dt<Q;){et=Y[dt];var _t=s[et],Rt=f[et];if(O)var Hr=W?O(Rt,_t,et,f,s,T):O(_t,Rt,et,s,f,T);if(!(Hr===void 0?_t===Rt||H(_t,Rt,b,O,T):Hr)){ft=!1;break}Tt||(Tt=et=="constructor")}if(ft&&!Tt){var Ee=s.constructor,Ae=f.constructor;Ee!=Ae&&"constructor"in s&&"constructor"in f&&!(typeof Ee=="function"&&Ee instanceof Ee&&typeof Ae=="function"&&Ae instanceof Ae)&&(ft=!1)}return T.delete(s),T.delete(f),ft}function Rr(s){return Zo(s,hi,ni)}function _e(s,f){var b=s.__data__;return ii(f)?b[typeof f=="string"?"string":"hash"]:b.map}function Ft(s,f){var b=Zt(s,f);return Jo(b)?b:void 0}function ri(s){var f=ut.call(s,It),b=s[It];try{s[It]=void 0;var O=!0}catch{}var H=Sr.call(s);return O&&(f?s[It]=b:delete s[It]),H}var ni=Pr?function(s){return s==null?[]:(s=Object(s),ke(Pr(s),function(f){return Lr.call(s,f)}))}:di,jt=Qt;(qe&&jt(new qe(new ArrayBuffer(1)))!=$||Jt&&jt(new Jt)!=_||$e&&jt($e.resolve())!=E||Ve&&jt(new Ve)!=F||We&&jt(new We)!=st)&&(jt=function(s){var f=Qt(s),b=f==z?s.constructor:void 0,O=b?Ut(b):"";if(O)switch(O){case _o:return $;case xo:return _;case Eo:return E;case Ao:return F;case Oo:return st}return f});function oi(s,f){return f=f??a,!!f&&(typeof s=="number"||j.test(s))&&s>-1&&s%1==0&&s<f}function ii(s){var f=typeof s;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?s!=="__proto__":s===null}function si(s){return!!Br&&Br in s}function ai(s){var f=s&&s.constructor,b=typeof f=="function"&&f.prototype||Dt;return s===b}function ui(s){return Sr.call(s)}function Ut(s){if(s!=null){try{return ge.call(s)}catch{}try{return s+""}catch{}}return""}function Mr(s,f){return s===f||s!==s&&f!==f}var ci=Cr(function(){return arguments}())?Cr:function(s){return te(s)&&ut.call(s,"callee")&&!Lr.call(s,"callee")},xe=Array.isArray;function fi(s){return s!=null&&kr(s.length)&&!Nr(s)}var Ke=vo||pi;function li(s,f){return zr(s,f)}function Nr(s){if(!Dr(s))return!1;var f=Qt(s);return f==v||f==g||f==p||f==P}function kr(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=a}function Dr(s){var f=typeof s;return s!=null&&(f=="object"||f=="function")}function te(s){return s!=null&&typeof s=="object"}var Fr=Kt?fe(Kt):Xo;function hi(s){return fi(s)?Ko(s):Qo(s)}function di(){return[]}function pi(){return!1}t.exports=li})(ze,ze.exports);var rf=ze.exports;const kf=yr(rf);var nf=Object.defineProperty,of=Object.defineProperties,sf=Object.getOwnPropertyDescriptors,xn=Object.getOwnPropertySymbols,af=Object.prototype.hasOwnProperty,uf=Object.prototype.propertyIsEnumerable,En=(t,e,r)=>e in t?nf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,An=(t,e)=>{for(var r in e||(e={}))af.call(e,r)&&En(t,r,e[r]);if(xn)for(var r of xn(e))uf.call(e,r)&&En(t,r,e[r]);return t},On=(t,e)=>of(t,sf(e));const cf={Accept:"application/json","Content-Type":"application/json"},ff="POST",Bn={headers:cf,method:ff},Sn=10;class Df{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new Si.EventEmitter,this.isAvailable=!1,this.registering=!1,!_n(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const r=ne(e),n=await(await qr(this.url,On(An({},Bn),{body:r}))).json();this.onPayload({data:n})}catch(r){this.onError(e.id,r)}}async register(e=this.url){if(!_n(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,o)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),o(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=ne({id:1,jsonrpc:"2.0",method:"test",params:[]});await qr(e,On(An({},Bn),{body:r}))}this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Pn(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),o=n.message||n.toString(),i=Gc(e,o);this.events.emit("payload",i)}parseError(e,r=this.url){return xc(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Sn&&this.events.setMaxListeners(Sn)}}export{Nf as $,Sf as C,Rf as D,Ef as E,Af as F,Df as G,kf as H,jf as I,zn as L,Mf as M,zf as N,Of as O,Pf as P,ef as Q,Tf as R,Bf as T,Cf as U,Gc as V,tf as X,Ec as _,Pn as a,bf as b,Gi as c,mf as d,_f as e,Lf as f,vf as g,po as h,yf as i,If as j,df as k,xc as m,ne as n,pf as p,fc as u,_s as v,gf as w,xf as x,wf as y,Uf as z};

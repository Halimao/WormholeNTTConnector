class a extends Error{}a.prototype.name="InvalidTokenError";function s(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function c(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return s(e)}catch{return atob(e)}}function p(t,e){if(typeof t!="string")throw new a("Invalid token specified: must be a string");e||(e={});const n=e.header===!0?0:1,r=t.split(".")[n];if(typeof r!="string")throw new a(`Invalid token specified: missing part #${n+1}`);let i;try{i=c(r)}catch(o){throw new a(`Invalid token specified: invalid base64 for part #${n+1} (${o.message})`)}try{return JSON.parse(i)}catch(o){throw new a(`Invalid token specified: invalid json for part #${n+1} (${o.message})`)}}export{p as d};
